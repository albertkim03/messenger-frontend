{"version":3,"sources":["AuthContext.js","utils/constants.js","axios.js","utils/text.js","components/Layout/ProtectedRoute.js","utils/paths.js","utils/axios_wrapper.js","utils/index.js","utils/token.js","utils/update.js","components/Placeholder.js","components/Channel/AddMemberDialog.js","components/Message/AddMessageTimerDialog.js","components/Message/AddMessage.js","components/Dm/DmMessages.js","components/Message/MessageEdit.js","components/Message/MessagePin.js","components/Message/MessageReact.js","components/Message/MessageRemove.js","components/Message/MessageShareDialog.js","components/Message/index.js","components/Channel/ChannelMessages.js","components/Channel/index.js","components/Layout/Body.js","components/Admin/SetUserPermissionsDialog.js","components/Admin/UserRemoveDialog.js","components/Admin/index.js","components/NotificationList.js","components/PollToggle/index.js","components/Search/SearchBar.js","components/Layout/Header.js","components/Layout/SideMenu.js","components/Layout/index.js","components/Channel/AddChannelDialog.js","components/ChannelList.js","components/Dm/AddDmDialog.js","components/DmList.js","components/ProfileList.js","components/ProfileChannelLists.js","pages/ChannelPage.js","components/Dm/index.js","pages/DmPage.js","pages/ForgotPasswordPage.js","components/WorkspaceStats.js","pages/HomePage.js","pages/LoginPage.js","components/Profile/EditableFields.js","components/Profile/UserStats.js","components/Profile/index.js","pages/ProfilePage.js","pages/RegisterPage.js","pages/ResetPasswordPage.js","components/Search/index.js","pages/SearchPage.js","App.js","serviceWorker.js","theme.js","index.js"],"names":["AuthContext","React","createContext","AuthProvider","Provider","Consumer","require","config","port","deployedUrl","undefined","window","BACKEND_PORT","DEPLOYED_URL","process","REACT_APP_BACKEND_PORT","url","PERMISSION_IDS","ITERATION","parseInt","REACT_APP_ITERATION","console","log","axios","defaults","baseURL","headers","put","post","delete","interceptors","request","use","response","data","toast","error","Promise","reject","message","ProtectedRoute","props","token","useContext","to","PATHS","AUTH_LOGIN","AUTH_REGISTER","AUTH_LOGOUT","CHANNEL_INVITE","CHANNEL_DETAILS","CHANNEL_MESSAGES","CHANNEL_JOIN","CHANNEL_ADDOWNER","CHANNEL_REMOVEOWNER","CHANNEL_LEAVE","CHANNELS_LIST","CHANNELS_LISTALL","CHANNELS_CREATE","MESSAGE_SEND","MESSAGE_EDIT","MESSAGE_REMOVE","DM_DETAILS","DM_LIST","DM_CREATE","DM_REMOVE","DM_LEAVE","DM_MESSAGES","MESSAGE_SENDDM","USER_PROFILE","USER_PROFILE_SETNAME","USER_PROFILE_SETEMAIL","USER_PROFILE_SETHANDLE","USERS_ALL","SEARCH","CLEAR","MESSAGE_SHARE","ADMIN_USER_REMOVE","ADMIN_USERPERMISSION_CHANGE","NOTIFICATIONS_GET","STANDUP_START","STANDUP_ACTIVE","STANDUP_SEND","AUTH_PASSWORDRESET_REQUEST","AUTH_PASSWORDRESET_RESET","USER_STATS","USERS_STATS","USER_PROFILE_UPLOADPHOTO","MESSAGE_SENDLATER","MESSAGE_SENDLATERDM","MESSAGE_REACT","MESSAGE_UNREACT","MESSAGE_PIN","MESSAGE_UNPIN","makeRequest","method","path","options","Error","get","params","others","useInterval","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","isMatchingId","a","b","extractUId","uId","localStorage","getItem","stepSubscribers","subscribeToStep","subscriber","interval","find","o","push","unsubscribeToStep","unsubscriber","filter","step","iter","forEach","useStep","watches","shouldSubscribe","isPolling","count","Placeholder","style","display","width","height","justifyContent","alignItems","CircularProgress","AddMemberDialog","channelId","useState","open","setOpen","selectedUser","setSelectedUser","users","setUsers","handleClose","then","catch","err","Button","variant","color","onClick","Dialog","onClose","aria-labelledby","DialogTitle","onSubmit","event","preventDefault","Number","DialogContent","DialogContentText","Select","onChange","newUserId","target","value","map","d","idx","MenuItem","key","nameFirst","nameLast","DialogActions","type","AddMessageTimerDialog","onTimerChange","Date","selectedDate","setSelectedDate","margin","label","toDate","KeyboardButtonProps","useStyles","makeStyles","theme","flex","flexDirection","input","spacing","marginRight","button","marginLeft","alignSelf","rightIcon","standupTimer","AddMessage","dmId","classes","currentMessage","setCurrentMessage","currentTimer","setCurrentTimer","timerDialogOpen","setTimerDialogOpen","onAdd","StepContext","onAddDm","StepContextDm","isTimerSet","standupRemaining","setStandupRemaining","standupEndTime","setStandupEndTime","submitMessage","trim","timeSent","getTime","startsWith","found","match","length","alert","isNaN","isInteger","timeFinish","now","Math","round","checkStandupActive","isActive","Typography","className","TextField","multiline","placeholder","fullWidth","onKeyDown","e","getModifierState","InputProps","endAdornment","InputAdornment","position","IconButton","aria-label","disabled","StepProvider","DmMessages","messages","setMessages","isPaginating","currentStart","currentEnd","sliceStart","pagination","setPagination","fetchDmMessages","p","start","newMessages","end","isEnd","pinnedMessages","m","isPinned","subheader","min","List","ListSubheader","messageId","ListItem","slice","reverse","PAGINATION_SIZE","MessageEdit","stepDm","prompt","size","edge","fontSize","withTheme","isPinnedState","setIsPinnedState","mdiPin","palette","action","active","mdiPinOutline","MessageReact","reacts","thumbUpCount","isReacted","thumbUpIndex","findIndex","react","reactId","uIds","isThisUserReacted","Badge","anchorOrigin","horizontal","vertical","badgeContent","messageReact","MessageRemove","MessageShareDialog","ogMessageId","selectedChannel","setSelectedChannel","selectedDm","setSelectedDm","selectedChDm","setSelectedChDm","channelsShare","setChannelsShare","dmsShare","setDmsShare","setMessage","name","rowsMax","Message","setNameFirst","setNameLast","imgUrl","setImgUrl","fullName","s","join","initials","user","profileImgUrl","ListItemAvatar","Avatar","border","src","ListItemText","primary","paddingLeft","timeago","secondary","fontFamily","ChannelMessages","fetchChannelMessages","Channel","loading","setLoading","setName","members","setMembers","owners","setOwners","fetchChannelData","ownerMembers","allMembers","finally","userIsMember","member","userIsOwner","owner","viewerIsMember","toUpperCase","Grid","container","item","Link","href","removeOwner","addOwner","leaveChannel","joinChannel","body","breakpoints","up","toolbar","mixins","Body","children","SetUserPermissionsDialog","permissionId","setPermissionId","direction","justify","xs","RadioGroup","newPermissionId","row","FormControlLabel","control","Radio","labelPlacement","UserRemoveDialog","Admin","buttonRef","ref","aria-controls","aria-haspopup","anchorEl","keepMounted","NotificationList","notifs","setNotifs","notifications","notif","component","notificationMessage","PollToggle","anchorRef","selectedIndex","setSelectedIndex","handleMenuItemClick","index","contains","ButtonGroup","aria-owns","prevOpen","Popper","transition","disablePortal","TransitionProps","placement","Grow","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","option","selected","search","borderRadius","shape","backgroundColor","fade","common","white","searchIcon","pointerEvents","inputRoot","inputInput","padding","transitions","create","withRouter","queryStr","setQueryStr","history","InputBase","root","inputProps","appBar","menuButton","title","flexGrow","logoutButton","float","Header","handleMenuToggle","useTheme","matches","useMediaQuery","loggedOut","setLoggedOut","removeItem","AppBar","Toolbar","textDecoration","noWrap","drawer","flexShrink","drawerPaper","SideMenu","Hidden","smUp","implementation","Drawer","anchor","paper","ModalProps","Divider","xsDown","Layout","menu","AddChannelDialog","secret","checked","isPublic","autoFocus","Switch","ChannelList","currChannelId","myChannels","setMyChannels","allChannels","setAllChannels","fetchChannelsData","getMyChannels","getAllChannels","all","spread","myChannelResponse","allChannelResponse","myChannelData","channels","filteredChannels","channel","c","ListItemIcon","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","AddDmDialog","selectedUsers","setSelectedUsers","multiple","Input","DmList","currDmId","myDms","setMyDms","fetchDmsData","ProfileList","uid","ProfileChannelLists","ChannelPage","Dm","membersList","setMembersList","fetchDmData","leaveDm","removeDm","DmPage","light","card","background","marginTop","ForgotPasswordPage","Container","maxWidth","Box","boxShadow","noValidate","email","required","WorkspaceStats","utilizationRate","setUtilizationRate","channelsData","setChannelsData","dmsData","setDmsData","messagesData","setMessagesData","workspaceStats","obj","x","y","toFixed","datasets","fill","borderColor","showLine","scales","xAxes","gridLines","lineWidth","time","unitStepSize","displayFormats","millisecond","second","minute","hour","day","week","month","quarter","year","HomePage","paddingTop","LoginPage","setAuth","password","authUserId","autoComplete","EditableFields","editable","master","masterValue","slaves","slaveValues","onSave","edit","setEdit","prevMasterValue","setPrevMasterValue","currMasterValue","setCurrMasterValue","prevSlaveValues","setPrevSlaveValues","currSlaveValues","setCurrSlaveValues","toggleEdit","slave","readOnly","valueIndex","copySlaves","val","onSlaveChange","cursor","UserStats","involvementRate","setInvolvementRate","userStats","Profile","profile","profileDetails","setProfileDetails","toString","passedProps","handleStr","rawText","items","split","xStart","yStart","xEnd","yEnd","ProfilePage","RegisterPage","values","setValues","handleChange","resetCode","newPassword","Search","Array","isArray","marginBottom","LinearProgress","SearchPage","App","document","authDetails","setAuthDetails","setItem","exact","render","ResetPasswordPage","Boolean","location","hostname","createMuiTheme","main","red","A400","default","ReactDOM","ThemeProvider","utils","MomentUtils","CssBaseline","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnVisibilityChange","draggable","pauseOnHover","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4e045c13.chunk.js","sourcesContent":["import React from 'react';\n\nconst AuthContext = React.createContext();\n\nexport const AuthProvider = AuthContext.Provider;\nexport const AuthConsumer = AuthContext.Consumer;\nexport default AuthContext;\n","require('dotenv').config();\n\nlet port = '0';\nlet deployedUrl = 'https://example.alwaysdata.net';\nif (window.BACKEND_PORT !== undefined) {\n  port = window.BACKEND_PORT;\n  deployedUrl = window.DEPLOYED_URL;\n} else {\n  port = process.env.REACT_APP_BACKEND_PORT;\n}\nexport const url = port === '0' || port === undefined ? deployedUrl : 'http://localhost:' + port;\n\nexport const drawerWidth = 240;\nexport const PERMISSION_IDS = {\n  OWNER: 1,\n  MEMBER: 2,\n};\nexport const PAGINATION_SIZE = 50;\nexport const SLICE_SIZE = 10;\n\nlet iterationBlah;\nif (window.ITERATION !== undefined) {\n  iterationBlah = parseInt(window.ITERATION);\n} else {\n  iterationBlah = parseInt(process.env.REACT_APP_ITERATION);\n}\n\nexport const ITERATION = iterationBlah;\n\nconsole.log('Using backend at', url);\nconsole.log('Running frontend for iteration', ITERATION);\n","import axios from 'axios';\nimport _ from 'lodash';\nimport { toast } from 'react-toastify';\nimport { url } from './utils/constants';\nimport { DEFAULT_ERROR_TEXT } from './utils/text';\n\naxios.defaults.baseURL = url;\naxios.defaults.headers.put['Content-Type'] = 'application/json';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\naxios.defaults.headers.delete['Content-Type'] = 'application/json';\n\naxios.interceptors.request.use(request => {\n  // if (request.method === 'put' || request.method === 'post' || request.method === 'delete') {\n  //     request.data = qs.stringify(request.data);\n  // }\n  return request;\n});\n\nconst errorHandler = error => {\n  // great gist https://gist.github.com/saqueib/a495af17d7c0e2fd5c2316b0822ebac3\n\n  // if has response show the error\n  console.error(error);\n\n  toast.error(error.response.data.error.message || DEFAULT_ERROR_TEXT);\n\n  return Promise.reject({ ...error });\n};\n\nconst responseHandler = response => {\n  if ('error' in response.data) {\n    toast.error(DEFAULT_ERROR_TEXT);\n    return Promise.reject();\n  }\n\n  return response;\n};\n\naxios.interceptors.response.use(responseHandler, errorHandler);\n","// General POST error\nexport const DEFAULT_ERROR_TEXT = 'An error occured. Try again later';\n\n// Specific GET errors (deprecated)\nexport const CHANNEL_ERROR_TEXT = 'Unable to retrieve channel information';\n","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport AuthContext from '../../AuthContext';\n\nfunction ProtectedRoute(props) {\n  const token = React.useContext(AuthContext);\n  console.log(token);\n  if (!token) {\n    return <Redirect to=\"/login\"/>;\n  }\n  return <Route {...props}/>;\n}\n\nexport default ProtectedRoute;\n","export const PATHS = [\n  {\n    // not applicable for iteration 0\n  },\n  {\n    // not applicable for iteration 1\n  },\n  {\n    // iteration 2\n    AUTH_LOGIN: 'auth/login/v2',\n    AUTH_REGISTER: 'auth/register/v2',\n    AUTH_LOGOUT: 'auth/logout/v1',\n    CHANNEL_INVITE: 'channel/invite/v2',\n    CHANNEL_DETAILS: 'channel/details/v2',\n    CHANNEL_MESSAGES: 'channel/messages/v2',\n    CHANNEL_JOIN: 'channel/join/v2',\n    CHANNEL_ADDOWNER: 'channel/addowner/v1',\n    CHANNEL_REMOVEOWNER: 'channel/removeowner/v1',\n    CHANNEL_LEAVE: 'channel/leave/v1',\n    CHANNELS_LIST: 'channels/list/v2',\n    CHANNELS_LISTALL: 'channels/listall/v2',\n    CHANNELS_CREATE: 'channels/create/v2',\n    MESSAGE_SEND: 'message/send/v1',\n    MESSAGE_EDIT: 'message/edit/v1',\n    MESSAGE_REMOVE: 'message/remove/v1',\n    DM_DETAILS: 'dm/details/v1',\n    DM_LIST: 'dm/list/v1',\n    DM_CREATE: 'dm/create/v1',\n    DM_REMOVE: 'dm/remove/v1',\n    DM_LEAVE: 'dm/leave/v1',\n    DM_MESSAGES: 'dm/messages/v1',\n    MESSAGE_SENDDM: 'message/senddm/v1',\n    USER_PROFILE: 'user/profile/v2',\n    USER_PROFILE_SETNAME: 'user/profile/setname/v1',\n    USER_PROFILE_SETEMAIL: 'user/profile/setemail/v1',\n    USER_PROFILE_SETHANDLE: 'user/profile/sethandle/v1',\n    USERS_ALL: 'users/all/v1',\n    SEARCH: 'search/v1',\n    CLEAR: 'clear/v1',\n  },\n  {\n    // iteration 3\n    AUTH_LOGIN: 'auth/login/v3',\n    AUTH_REGISTER: 'auth/register/v3',\n    AUTH_LOGOUT: 'auth/logout/v2',\n    CHANNEL_INVITE: 'channel/invite/v3',\n    CHANNEL_DETAILS: 'channel/details/v3',\n    CHANNEL_MESSAGES: 'channel/messages/v3',\n    CHANNEL_JOIN: 'channel/join/v3',\n    CHANNEL_ADDOWNER: 'channel/addowner/v2',\n    CHANNEL_REMOVEOWNER: 'channel/removeowner/v2',\n    CHANNEL_LEAVE: 'channel/leave/v2',\n    CHANNELS_LIST: 'channels/list/v3',\n    CHANNELS_LISTALL: 'channels/listall/v3',\n    CHANNELS_CREATE: 'channels/create/v3',\n    MESSAGE_SEND: 'message/send/v2',\n    MESSAGE_EDIT: 'message/edit/v2',\n    MESSAGE_REMOVE: 'message/remove/v2',\n    MESSAGE_SHARE: 'message/share/v1',\n    DM_DETAILS: 'dm/details/v2',\n    DM_LIST: 'dm/list/v2',\n    DM_CREATE: 'dm/create/v2',\n    DM_REMOVE: 'dm/remove/v2',\n    DM_LEAVE: 'dm/leave/v2',\n    DM_MESSAGES: 'dm/messages/v2',\n    MESSAGE_SENDDM: 'message/senddm/v2',\n    USER_PROFILE: 'user/profile/v3',\n    USER_PROFILE_SETNAME: 'user/profile/setname/v2',\n    USER_PROFILE_SETEMAIL: 'user/profile/setemail/v2',\n    USER_PROFILE_SETHANDLE: 'user/profile/sethandle/v2',\n    USERS_ALL: 'users/all/v2',\n    SEARCH: 'search/v1',\n    ADMIN_USER_REMOVE: 'admin/user/remove/v1',\n    ADMIN_USERPERMISSION_CHANGE: 'admin/userpermission/change/v1',\n    NOTIFICATIONS_GET: 'notifications/get/v1',\n    CLEAR: 'clear/v1',\n    STANDUP_START: 'standup/start/v1',\n    STANDUP_ACTIVE: 'standup/active/v1',\n    STANDUP_SEND: 'standup/send/v1',\n    AUTH_PASSWORDRESET_REQUEST: 'auth/passwordreset/request/v1',\n    AUTH_PASSWORDRESET_RESET: 'auth/passwordreset/reset/v1',\n    USER_STATS: 'user/stats/v1',\n    USERS_STATS: 'users/stats/v1',\n    USER_PROFILE_UPLOADPHOTO: 'user/profile/uploadphoto/v1',\n    MESSAGE_SENDLATER: 'message/sendlater/v1',\n    MESSAGE_SENDLATERDM: 'message/sendlaterdm/v1',\n    MESSAGE_REACT: 'message/react/v1',\n    MESSAGE_UNREACT: 'message/unreact/v1',\n    MESSAGE_PIN: 'message/pin/v1',\n    MESSAGE_UNPIN: 'message/unpin/v1',\n  },\n];\n","import axios from 'axios';\nimport { ITERATION } from './constants';\nimport { PATHS } from './paths';\n\nexport const makeRequest = (method, path, options) => {\n  if (ITERATION === 2) {\n    if (PATHS[ITERATION][path] == null) {\n      return Promise.reject(new Error(\"Don\\'t worry - this is not part of iteration 2 so this error is expected\"))\n    }\n    switch (method) {\n      case 'GET':\n        return axios.get(PATHS[ITERATION][path], { params: options });\n      case 'POST':\n        return axios.post(PATHS[ITERATION][path], options);\n      case 'PUT':\n        return axios.put(PATHS[ITERATION][path], options);\n      case 'DELETE':\n        return axios.delete(PATHS[ITERATION][path], { params: options });\n      default:\n        console.log('yikes');\n    }\n  } else if (ITERATION === 3) {\n    const { token, ...others } = options;\n    switch (method) {\n      case 'GET':\n        return axios.get(PATHS[ITERATION][path], {\n          params: others,\n          headers: { token },\n        });\n      case 'POST':\n        return axios.post(PATHS[ITERATION][path], others, {\n          headers: { token },\n        });\n      case 'PUT':\n        return axios.put(PATHS[ITERATION][path], others, {\n          headers: { token },\n        });\n      case 'DELETE':\n        return axios.delete(PATHS[ITERATION][path], {\n          params: others,\n          headers: { token },\n        });\n      default:\n        console.log('yikes');\n    }\n  }\n};\n","// from: https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nimport { useEffect, useRef } from 'react';\n\nexport function useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nexport const isMatchingId = (a, b) => parseInt(a, 10) === parseInt(b, 10);\n","export function extractUId(token) {\n  let uId = localStorage.getItem('uId');\n  if (uId == null) {\n    uId = -1;\n  }\n  return uId;\n}\n","import React from 'react';\nimport { useInterval } from './index';\n\nexport let stepSubscribers = [];\n\nexport const subscribeToStep = (subscriber, interval = 1) => {\n  if (stepSubscribers.find(o => o.subscriber === subscriber) !== undefined) {\n    return;\n  }\n  stepSubscribers.push({ subscriber, interval });\n};\nexport const unsubscribeToStep =\n    unsubscriber => (stepSubscribers = stepSubscribers.filter(o => o.subscriber !== unsubscriber));\n\nexport const step = iter => {\n  stepSubscribers.forEach(o => {\n    if (!iter || iter % o.interval === 0) {\n      o.subscriber();\n    }\n  });\n};\n\nexport const useStep = (subscriber, watches = [], interval = 1) => {\n  const shouldSubscribe = subscriber && typeof subscriber === 'function';\n  React.useEffect(() => {\n    if (shouldSubscribe) {\n      subscriber();\n      subscribeToStep(subscriber, interval);\n      return () => unsubscribeToStep(subscriber);\n    }\n  }, watches);\n  return step;\n};\n\nlet isPolling = false;\nexport const pollingInterval = 2000;\nexport const getIsPolling = () => isPolling;\nexport const setIsPolling = bool => {\n  isPolling = !!bool; // force boolean type\n};\n\n/* IMPORTANT: Called in PollToggle */\nlet count = 0;\nexport const usePolling = () => {\n  useInterval(() => {\n    if (isPolling) {\n      step(count++);\n    }\n  }, pollingInterval);\n};\n","import { CircularProgress } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nfunction Placeholder() {\r\n  return (\r\n      <div\r\n          style={{\r\n            display: 'flex',\r\n            width: '100%',\r\n            height: '100%',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n          }}\r\n      >\r\n        <CircularProgress/>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Placeholder;\r\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { useStep } from '../../utils/update';\n\nfunction AddMemberDialog({ channelId, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedUser, setSelectedUser] = React.useState('');\n  const [users, setUsers] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const step = useStep();\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      makeRequest('GET', 'USERS_ALL', { token })\n          .then(({ data }) => {\n            setUsers(data['users']);\n          })\n          .catch(err => console.log(err));\n    }\n    fetchUserData();\n  }, [token]);\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n  function handleClose() {\n    setOpen(false);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const uId = selectedUser;\n\n    if (uId == null) {\n      return;\n    }\n\n    makeRequest('POST', 'CHANNEL_INVITE', { token, uId, channelId: Number.parseInt(channelId) })\n        .then(response => {\n          console.log(response);\n          step();\n        })\n        .catch(err => console.log(err));\n  }\n  return (\n      <div>\n        <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>Invite Member</Button>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Invite User</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>\n                Select a user below to invite them to this channel\n              </DialogContentText>\n              <Select\n                  style={{ width: '100%' }}\n                  id=\"uId\"\n                  onChange={handleUserSelect}\n                  value={selectedUser}\n              >\n                {users.map((d, idx) => {\n                  return <MenuItem key={d.uId} value={d.uId}>{d.nameFirst} {d.nameLast}</MenuItem>;\n                })}\n              </Select>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Invite</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </div>\n  );\n}\n\nexport default AddMemberDialog;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core';\nimport { KeyboardTimePicker } from '@material-ui/pickers';\nimport React from 'react';\n\nfunction AddMessageTimerDialog({ open, handleClose, onTimerChange, ...props }) {\n  const [selectedDate, setSelectedDate] = React.useState(new Date());\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    onTimerChange(selectedDate);\n  }\n\n  return (\n      <div>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Send later</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <KeyboardTimePicker\n                  margin=\"normal\"\n                  id=\"time-picker\"\n                  label=\"Time picker\"\n                  value={selectedDate}\n                  onChange={d => setSelectedDate(d.toDate())}\n                  KeyboardButtonProps={{\n                    'aria-label': 'change time',\n                  }}\n              />\n              <DialogContentText>Enter a time to send</DialogContentText>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Set Time</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </div>\n  );\n}\n\nexport default AddMessageTimerDialog;\n","import { Button, IconButton, InputAdornment, TextField, Typography } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport TimerIcon from '@material-ui/icons/Timer';\nimport { makeStyles } from '@material-ui/styles';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { useInterval } from '../../utils';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { useStep } from '../../utils/update';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\nimport AddMessageTimerDialog from './AddMessageTimerDialog';\n\nconst useStyles = makeStyles(theme => ({\n  flex: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  input: {\n    margin: theme.spacing(1),\n    marginRight: 0,\n  },\n  button: {\n    margin: theme.spacing(1),\n    marginLeft: 0,\n    alignSelf: 'stretch',\n  },\n  rightIcon: {\n    marginLeft: theme.spacing(1),\n  },\n  standupTimer: {\n    margin: theme.spacing(2),\n  },\n}));\n\nconst TIMER_INACTIVE_VALUE = -1;\n\nfunction AddMessage({ channelId = -1, dmId = -1 }) {\n  const classes = useStyles();\n  const [currentMessage, setCurrentMessage] = React.useState('');\n  const [currentTimer, setCurrentTimer] = React.useState(TIMER_INACTIVE_VALUE);\n  const [timerDialogOpen, setTimerDialogOpen] = React.useState(false);\n  const token = React.useContext(AuthContext);\n  let onAdd = React.useContext(StepContext);\n  let onAddDm = React.useContext(StepContextDm);\n  onAdd = onAdd ? onAdd : () => {}; // sanity check\n  onAddDm = onAddDm ? onAddDm : () => {}; // sanity check\n\n  const isTimerSet = currentTimer !== TIMER_INACTIVE_VALUE;\n\n  const [standupRemaining, setStandupRemaining] = React.useState();\n  const [standupEndTime, setStandupEndTime] = React.useState();\n\n  const submitMessage = () => {\n    const message = currentMessage.trim();\n    if (!message) {\n      return;\n    }\n    setCurrentMessage('');\n\n    /**\n     * Sending a message when a standup is active\n     * note: probably makes sense that this takes precedence over\n     *       starting a standup.\n     */\n    if (dmId === -1 && standupRemaining && standupRemaining > 0) {\n      makeRequest('POST', 'STANDUP_SEND', {\n        token,\n        channelId: Number.parseInt(channelId),\n        message,\n      }).then(({ data }) => {\n        console.log(data);\n        onAdd();\n      })\n          .catch(err => console.log(err));\n      return;\n    }\n\n    /**\n     * Sending a message when the sendlater timer has been set\n     */\n    if (isTimerSet) {\n      if (dmId === -1) {\n        makeRequest('POST', 'MESSAGE_SENDLATER', {\n          token,\n          channelId: Number.parseInt(channelId),\n          message,\n          timeSent: currentTimer.getTime() / 1000, // ms to s conversion\n        }).then(({ data }) => console.log(data)).catch(err => console.log(err));\n      } else {\n        makeRequest('POST', 'MESSAGE_SENDLATERDM', {\n          token,\n          dmId: Number.parseInt(dmId),\n          message,\n          timeSent: currentTimer.getTime() / 1000, // ms to s conversion\n        }).then(({ data }) => console.log(data)).catch(err => console.log(err));\n      }\n      setCurrentTimer(TIMER_INACTIVE_VALUE);\n      return;\n    }\n\n    /**\n     * Starting a standup (any message which starts with /standup)\n     */\n    if (dmId === -1 && message.startsWith('/standup')) {\n      const re = /\\/standup\\s+([1-9][0-9]*)/;\n      const found = message.match(re);\n      if (!found || found.length < 2) {\n        alert('Usage: /standup <duration in seconds>');\n      } else {\n        var length = parseInt(found[1], 10);\n        if (isNaN(length) || !Number.isInteger(length)) {\n          alert('Usage: /standup <duration in seconds>');\n        } else {\n          makeRequest('POST', 'STANDUP_START', {\n            token,\n            channelId: Number.parseInt(channelId),\n            length,\n          }).then(({ data }) => {\n            const { timeFinish } = data;\n            setStandupEndTime(timeFinish);\n            alert(`You've started a standup for ${length} seconds`);\n          }).catch(err => console.log(err));\n        }\n      }\n      return;\n    }\n\n    /**\n     * Default message sending behaviour\n     */\n    if (dmId === -1) {\n      makeRequest('POST', 'MESSAGE_SEND', {\n        token,\n        channelId: Number.parseInt(channelId),\n        message,\n      }).then(({ data }) => {\n        console.log(data);\n        onAdd();\n      })\n          .catch(err => console.log(err));\n    } else {\n      makeRequest('POST', 'MESSAGE_SENDDM', {\n        token,\n        dmId: Number.parseInt(dmId),\n        message,\n      }).then(({ data }) => {\n        console.log(data);\n        onAddDm();\n      }).catch(err => console.log(err));\n    }\n  };\n\n  useInterval(() => {\n    if (standupEndTime > Date.now() / 1000) {\n      setStandupRemaining(() => Math.round(standupEndTime - Math.round(Date.now() / 1000)));\n    } else {\n      setStandupRemaining();\n    }\n  }, 1000);\n\n  const checkStandupActive = () => {\n    if (channelId === -1) {\n      return;\n    }\n    makeRequest('GET', 'STANDUP_ACTIVE', {\n      token,\n      channelId,\n    }).then(({ data }) => {\n      const { isActive = false, timeFinish } = data;\n      if (isActive && timeFinish) {\n        setStandupEndTime(timeFinish);\n      } else {\n        setStandupRemaining(0);\n        setStandupEndTime(-1);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  useStep(checkStandupActive, [currentMessage] /* check when user is typing */);\n\n  React.useEffect(checkStandupActive, [channelId]);\n\n  const keyDown = e => {\n    if (e.key === 'Enter' && !e.getModifierState('Shift')) {\n      e.preventDefault();\n      submitMessage();\n    }\n  };\n\n  return (\n      <>\n        {standupRemaining > 0 && (\n            <Typography variant=\"caption\" className={classes.standupTimer}>\n              {`STANDUP ACTIVE: ${standupRemaining} seconds remaining`}\n            </Typography>\n        )}\n        <div className={classes.flex}>\n          <TextField\n              className={classes.input}\n              label=\"Send a message \"\n              multiline\n              placeholder=\"...\"\n              fullWidth\n              margin=\"normal\"\n              variant=\"filled\"\n              onKeyDown={keyDown}\n              value={currentMessage}\n              onChange={e => setCurrentMessage(e.target.value)}\n              InputProps={{\n                endAdornment: (\n                    <InputAdornment position=\"end\">\n                      <IconButton\n                          aria-label=\"toggle visibility\"\n                          disabled={standupRemaining > 0}\n                          onClick={() =>\n                              isTimerSet ? setCurrentTimer(-1) : setTimerDialogOpen(true)}\n                      >\n                        <TimerIcon color={isTimerSet ? 'secondary' : undefined}/>\n                      </IconButton>\n                    </InputAdornment>\n                ),\n              }}\n          />\n          <Button\n              className={classes.button}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={submitMessage}\n          >\n            Send\n            <SendIcon className={classes.rightIcon}/>\n          </Button>\n        </div>\n        <AddMessageTimerDialog\n            open={timerDialogOpen}\n            handleClose={() => setTimerDialogOpen(false)}\n            onTimerChange={setCurrentTimer}\n        />\n      </>\n  );\n}\n\nexport default AddMessage;\n","import { Button, List, ListItem, ListSubheader } from '@material-ui/core';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { PAGINATION_SIZE, SLICE_SIZE } from '../../utils/constants';\nimport { useStep } from '../../utils/update';\nimport Message from '../Message';\nimport AddMessage from '../Message/AddMessage';\n\nexport const StepContextDm = React.createContext();\nexport const StepProvider = StepContextDm.Provider;\nexport const StepConsumer = StepContextDm.Consumer;\n\nfunction DmMessages({ dmId = '' }) {\n  const [messages, setMessages] = React.useState([]);\n  const [pagination, setPagination] = React.useState({\n    dmId,\n    isPaginating: false,\n    currentStart: 0,\n    currentEnd: 0,\n    sliceStart: 0,\n  });\n  const token = React.useContext(AuthContext);\n\n  const fetchDmMessages = () => {\n    const p = pagination.dmId === dmId ? pagination : {\n      dmId,\n      isPaginating: false,\n      currentStart: 0,\n      currentEnd: 0,\n      sliceStart: 0,\n    };\n    makeRequest('GET', 'DM_MESSAGES', {\n      token,\n      dmId: Number.parseInt(dmId),\n      start: p.isPaginating ? p.currentStart : 0,\n    }).then(({ data }) => {\n      const { messages: newMessages, end } = data;\n      setPagination({ ...p, dmId, currentEnd: end }); // TODO: add/remove problems\n      setMessages(newMessages);\n    }).catch(err => console.log(err));\n  };\n  useStep(fetchDmMessages, [dmId, pagination.currentStart]);\n\n  const onPrev = () =>\n      setPagination(({ sliceStart, currentStart, currentEnd, ...pagination }) => {\n        const pageSize = messages.length;\n\n        if (sliceStart + SLICE_SIZE < pageSize) {\n          return {\n            ...pagination,\n            currentStart,\n            currentEnd,\n            sliceStart: sliceStart + SLICE_SIZE,\n            isPaginating: true,\n          };\n        }\n\n        return {\n          ...pagination,\n          currentEnd,\n          currentStart: currentEnd,\n          sliceStart: 0,\n          isPaginating: true,\n        };\n      });\n\n  const onNext = () =>\n      setPagination(({ sliceStart, currentStart, ...pagination }) => {\n        if (sliceStart >= SLICE_SIZE) {\n          return {\n            ...pagination,\n            currentStart,\n            sliceStart: sliceStart - SLICE_SIZE,\n            isPaginating: !(currentStart == 0 && sliceStart == SLICE_SIZE),\n          };\n        }\n\n        if (currentStart >= PAGINATION_SIZE) {\n          if (currentStart) {\n            return {\n              ...pagination,\n              currentStart: currentStart - PAGINATION_SIZE,\n              sliceStart: PAGINATION_SIZE - SLICE_SIZE,\n            };\n          }\n        }\n\n        return {\n          ...pagination,\n          currentStart: 0,\n          sliceStart: 0,\n          isPaginating: false,\n        };\n      });\n\n  const { currentStart, currentEnd, sliceStart, isPaginating } = pagination;\n\n  const isEnd = currentEnd == -1 && sliceStart >= messages.length - SLICE_SIZE;\n\n  const pinnedMessages = messages.filter(m => m.isPinned);\n  const subheader = !messages.length\n      ? `Messages (None)`\n      : `Messages [${currentStart + sliceStart + 1}...${\n          Math.min(currentStart + messages.length, currentStart + sliceStart + SLICE_SIZE)\n      }]`;\n\n  return (\n      <StepProvider value={fetchDmMessages}>\n        {pinnedMessages.length > 0 && (\n            <>\n              <hr/>\n              <List subheader={<ListSubheader>Pinned Messages</ListSubheader>}>\n                {pinnedMessages.map(m => <Message key={m.messageId} {...m}/>)}\n              </List>\n            </>\n        )}\n        <hr/>\n        <List subheader={<ListSubheader>{subheader}</ListSubheader>} style={{ width: '100%' }}>\n          {!isEnd && (\n              <ListItem>\n                <Button variant=\"outlined\" color=\"secondary\" onClick={onPrev}>\n                  Previous messages\n                </Button>\n              </ListItem>\n          )}\n          {messages.slice(sliceStart, sliceStart + SLICE_SIZE).reverse().map(message => (\n              <Message key={message.messageId} {...message}/>\n          ))}\n          {isPaginating && (\n              <ListItem>\n                <Button variant=\"outlined\" color=\"secondary\" onClick={onNext}>Next messages</Button>\n              </ListItem>\n          )}\n        </List>\n        <AddMessage dmId={dmId}/>\n      </StepProvider>\n  );\n}\n\nexport default DmMessages;\n","import { IconButton } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessageEdit({ messageId, disabled = false }) {\n  const token = React.useContext(AuthContext);\n\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const messageEdit = () => {\n    const message = prompt();\n    if (message === null) {\n      return; // basic validation\n    }\n\n    /**\n     * Empty message should delete original\n     */\n    if (message === '') {\n      makeRequest('DELETE', 'MESSAGE_REMOVE', {\n        token,\n        messageId: Number.parseInt(messageId),\n      }).then(() => {\n        step();\n        stepDm();\n      }).catch(err => console.log(err));\n      return;\n    }\n\n    /**\n     * Default message edit behaviour\n     */\n    makeRequest('PUT', 'MESSAGE_EDIT', {\n      token,\n      messageId: Number.parseInt(messageId),\n      message,\n    }).then(() => {\n      step();\n      stepDm();\n    }).catch(err => console.log(err));\n  };\n\n  return (\n      <IconButton\n          disabled={disabled}\n          onClick={messageEdit}\n          style={{ margin: 1 }}\n          size=\"small\"\n          edge=\"end\"\n          aria-label=\"delete\"\n      >\n        <EditIcon fontSize=\"small\"/>\n      </IconButton>\n  );\n}\n\nexport default MessageEdit;\n","import { IconButton } from '@material-ui/core';\nimport { withTheme } from '@material-ui/styles';\nimport { mdiPin, mdiPinOutline } from '@mdi/js';\nimport MdiIcon from '@mdi/react';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessagePin({ messageId, isPinned = false, theme }) {\n  const [isPinnedState, setIsPinnedState] = React.useState(isPinned);\n  React.useEffect(() => setIsPinnedState(isPinned), [isPinned]);\n\n  const token = React.useContext(AuthContext);\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const toggle = () => {\n    if (isPinnedState) {\n      makeRequest('POST', 'MESSAGE_UNPIN', {\n        token,\n        messageId: Number.parseInt(messageId),\n      }).then(() => {\n        step();\n        stepDm();\n      }).catch(err => console.log(err));\n    } else {\n      makeRequest('POST', 'MESSAGE_PIN', {\n        token,\n        messageId: Number.parseInt(messageId),\n      }).then(() => {\n        step();\n        stepDm();\n      }).catch(err => console.log(err));\n    }\n    // Optimistic re-rendering\n    // setIsPinned(isPinnedState => !!!isPinnedState);\n  };\n\n  return (\n      <IconButton\n          onClick={toggle}\n          style={{ margin: 1 }}\n          size=\"small\"\n          edge=\"end\"\n          aria-label=\"delete\"\n      >\n        {isPinnedState\n            ? <MdiIcon path={mdiPin} size=\"1em\" color={theme && theme.palette.action.active}/>\n            : (\n                <MdiIcon\n                    path={mdiPinOutline}\n                    size=\"1em\"\n                    color={theme && theme.palette.action.active}\n                />\n            )}\n      </IconButton>\n  );\n}\n\nexport default withTheme(MessagePin);\n","import { Badge, IconButton } from '@material-ui/core';\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\nimport ThumbUpOutlinedIcon from '@material-ui/icons/ThumbUpOutlined';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessageReact({ messageId, reacts = [] /* [{ reactId, uIds }] */ }) {\n  const token = React.useContext(AuthContext);\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const messageReact = isReacted => {\n    if (isReacted) {\n      makeRequest('POST', 'MESSAGE_UNREACT', {\n        token,\n        messageId: Number.parseInt(messageId),\n        reactId: 1,\n      }).then(() => {\n        step();\n        stepDm();\n      }).catch(err => console.log(err));\n    } else {\n      makeRequest('POST', 'MESSAGE_REACT', {\n        token,\n        messageId: Number.parseInt(messageId),\n        reactId: 1,\n      }).then(() => {\n        step();\n        stepDm();\n      }).catch(err => console.log(err));\n    }\n  };\n\n  let thumbUpCount = 0;\n  let isReacted = false;\n  const thumbUpIndex = reacts.findIndex(react => react.reactId === 1);\n  if (thumbUpIndex !== -1) {\n    thumbUpCount = reacts[thumbUpIndex].uIds.length;\n    isReacted = reacts[thumbUpIndex].isThisUserReacted;\n  }\n\n  return (\n      <Badge\n          anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n          badgeContent={thumbUpCount}\n          color=\"secondary\"\n      >\n        <IconButton\n            onClick={() => messageReact(isReacted)}\n            style={{ margin: 1 }}\n            size=\"small\"\n            edge=\"end\"\n            aria-label=\"delete\"\n        >\n          {isReacted ? <ThumbUpIcon fontSize=\"small\"/> : <ThumbUpOutlinedIcon fontSize=\"small\"/>}\n        </IconButton>\n      </Badge>\n  );\n}\n\nexport default MessageReact;\n","import { IconButton } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { StepContext } from '../Channel/ChannelMessages';\nimport { StepContextDm } from '../Dm/DmMessages';\n\nfunction MessageRemove({ messageId, disabled = false }) {\n  const token = React.useContext(AuthContext);\n\n  let step = React.useContext(StepContext);\n  let stepDm = React.useContext(StepContextDm);\n  step = step ? step : () => {}; // sanity check\n  stepDm = stepDm ? stepDm : () => {}; // sanity check\n\n  const messageRemove = () => {\n    makeRequest('DELETE', 'MESSAGE_REMOVE', {\n      token,\n      messageId: Number.parseInt(messageId),\n    }).then(() => {\n      step();\n      stepDm();\n    });\n  };\n\n  return (\n      <IconButton\n          disabled={disabled}\n          onClick={messageRemove}\n          style={{ margin: 1 }}\n          size=\"small\"\n          edge=\"end\"\n          aria-label=\"delete\"\n      >\n        <DeleteIcon fontSize=\"small\"/>\n      </IconButton>\n  );\n}\n\nexport default MessageRemove;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  IconButton,\n  MenuItem,\n  Select,\n  TextField,\n} from '@material-ui/core';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { useStep } from '../../utils/update';\n\nfunction MessageShareDialog({ ogMessageId, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedChannel, setSelectedChannel] = React.useState(-1);\n  const [selectedDm, setSelectedDm] = React.useState(-1);\n  const [selectedChDm, setSelectedChDm] = React.useState('');\n  const [channelsShare, setChannelsShare] = React.useState([]);\n  const [dmsShare, setDmsShare] = React.useState([]);\n  const [message, setMessage] = React.useState('');\n\n  const token = React.useContext(AuthContext);\n\n  const step = useStep();\n\n  React.useEffect(() => {\n    function fetchChannelData() {\n      makeRequest('GET', 'CHANNELS_LIST', {\n        token,\n      }).then(({ data }) => {\n        setChannelsShare(data['channels']);\n      })\n          .catch(err => console.log(err));\n      makeRequest('GET', 'DM_LIST', {\n        token,\n      }).then(({ data }) => {\n        setDmsShare(data['dms']);\n      })\n          .catch(err => console.log(err));\n    }\n    fetchChannelData();\n  }, [token]);\n\n  const handleChannelSelect = event => {\n    setSelectedChDm(event.target.value);\n    if (event.target.value.slice(0, 1) === 'd') {\n      setSelectedDm(event.target.value.slice(1));\n      setSelectedChannel(-1);\n    } else {\n      setSelectedChannel(event.target.value.slice(1));\n      setSelectedDm(-1);\n    }\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  const handleChange = event => {\n    setMessage(event.target.value);\n  };\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    makeRequest('POST', 'MESSAGE_SHARE', {\n      token,\n      ogMessageId: Number.parseInt(ogMessageId),\n      message,\n      channelId: Number.parseInt(selectedChannel),\n      dmId: Number.parseInt(selectedDm),\n    }).then(response => {\n      console.log(response);\n      step();\n    }).catch(err => console.log(err));\n  }\n  return (\n      <div>\n        <IconButton\n            onClick={handleClickOpen}\n            style={{ margin: 1 }}\n            size=\"small\"\n            edge=\"end\"\n            aria-label=\"share\"\n        >\n          <ArrowForwardIcon fontSize=\"small\"/>\n        </IconButton>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Share message</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>Enter a channel below to share the message to</DialogContentText>\n              <Select\n                  style={{ width: '100%' }}\n                  id=\"u_id\"\n                  onChange={handleChannelSelect}\n                  value={selectedChDm}\n              >\n                {channelsShare.map(d => {\n                  return <MenuItem key={d.channelId} value={`c${d.channelId}`}>{d.name}</MenuItem>;\n                })}\n                {dmsShare.map(d => {\n                  return <MenuItem key={d.dmId} value={`d${d.dmId}`}>{d.name}</MenuItem>;\n                })}\n              </Select>\n              <br/>\n              <br/>\n              <DialogContentText>Optionally, enter an additional message</DialogContentText>\n              <TextField multiline fullWidth rowsMax={4} value={message} onChange={handleChange}/>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Share</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </div>\n  );\n}\n\nexport default MessageShareDialog;\n","import { Avatar, ListItem, ListItemAvatar, ListItemText } from '@material-ui/core';\nimport timeago from 'epoch-timeago';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport MessageEdit from './MessageEdit';\nimport MessagePin from './MessagePin';\nimport MessageReact from './MessageReact';\nimport MessageRemove from './MessageRemove';\nimport MessageShareDialog from './MessageShareDialog';\n\nfunction Message({\n  messageId,\n  message = '',\n  uId,\n  timeSent,\n  isPinned = false,\n  reacts = [], /* [{ reactId, uIds }] */\n}) {\n  const [nameFirst, setNameFirst] = React.useState();\n  const [nameLast, setNameLast] = React.useState();\n  const [imgUrl, setImgUrl] = React.useState();\n  const token = React.useContext(AuthContext);\n\n  const fullName = [nameFirst, nameLast].filter(s => s != null && s !== '').join(' ');\n  const initials = [nameFirst, nameLast].filter(s => s != null && s !== '').map(s => s[0]).join('');\n\n  React.useEffect(() => {\n    setNameFirst();\n    setNameLast();\n    setImgUrl();\n    makeRequest('GET', 'USER_PROFILE', {\n      token,\n      uId,\n    }).then(({ data }) => {\n      const {\n        user: {\n          nameFirst = '',\n          nameLast = '',\n          profileImgUrl = '',\n        },\n      } = data;\n      setNameFirst(nameFirst);\n      setNameLast(nameLast);\n      setImgUrl(`${profileImgUrl}`);\n    }).catch(err => console.log(err));\n  }, [messageId, token, uId]);\n\n  return (\n      <ListItem key={messageId} style={{ width: '100%' }}>\n        {message && (\n            <>\n              <ListItemAvatar>\n                <Avatar\n                    style={{\n                      width: '50px',\n                      height: '50px',\n                      border: '1px solid #ccc',\n                    }}\n                    src={imgUrl}\n                >\n                  {initials}\n                </Avatar>\n              </ListItemAvatar>\n              <div\n                  style={{\n                    display: 'flex',\n                    width: '100%',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                  }}\n              >\n                <ListItemText\n                    primary={(\n                        <>\n                          <span>{fullName}</span>\n                          <span style={{ paddingLeft: 10, fontSize: 10 }}>\n                            {timeago(timeSent * 1000)}\n                          </span>\n                        </>\n                    )}\n                    secondary={(\n                        <div>\n                          <pre style={{ fontFamily: 'inherit' }}>{message}</pre>\n                        </div>\n                    )}\n                />\n                <div style={{ display: 'flex', height: 30, marginLeft: 20 }}>\n                  <MessageReact messageId={messageId} reacts={reacts} uId={uId}/>\n                  <MessagePin messageId={messageId} isPinned={isPinned}/>\n                  <MessageShareDialog ogMessageId={messageId}/>\n                  <MessageEdit messageId={messageId} // disabled={!isUser} /* We have no way of checking admin status */\n                  />\n                  <MessageRemove messageId={messageId} // disabled={!isUser} /* We have no way of checking admin status */\n                  />\n                </div>\n              </div>\n            </>\n        )}\n      </ListItem>\n  );\n}\n\nexport default Message;\n","import { Button, List, ListItem, ListSubheader } from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { PAGINATION_SIZE, SLICE_SIZE } from '../../utils/constants';\nimport { useStep } from '../../utils/update';\nimport Message from '../Message';\nimport AddMessage from '../Message/AddMessage';\n\nexport const StepContext = React.createContext();\nexport const StepProvider = StepContext.Provider;\nexport const StepConsumer = StepContext.Consumer;\n\nfunction ChannelMessages({ channelId = '' }) {\n  const [messages, setMessages] = React.useState([]);\n  const [pagination, setPagination] = React.useState({\n    channelId: channelId,\n    isPaginating: false,\n    currentStart: 0,\n    currentEnd: 0,\n    sliceStart: 0,\n  });\n  const token = React.useContext(AuthContext);\n\n  const fetchChannelMessages = () => {\n    const p = pagination.channelId === channelId ? pagination : {\n      channelId: channelId,\n      isPaginating: false,\n      currentStart: 0,\n      currentEnd: 0,\n      sliceStart: 0,\n    };\n    makeRequest('GET', 'CHANNEL_MESSAGES', {\n      token,\n      channelId: Number.parseInt(channelId),\n      start: p.isPaginating ? p.currentStart : 0,\n    }).then(({ data }) => {\n      const { messages: newMessages, end } = data;\n      setPagination({ ...p, channelId: channelId, currentEnd: end }); // TODO: add/remove problems\n      setMessages(newMessages);\n    }).catch(err => console.log(err));\n  };\n  useStep(fetchChannelMessages, [channelId, pagination.currentStart]);\n\n  const onPrev = () =>\n      setPagination(({ sliceStart, currentStart, currentEnd, ...pagination }) => {\n        const pageSize = messages.length;\n\n        if (sliceStart + SLICE_SIZE < pageSize) {\n          return {\n            ...pagination,\n            currentStart,\n            currentEnd,\n            sliceStart: sliceStart + SLICE_SIZE,\n            isPaginating: true,\n          };\n        }\n\n        return {\n          ...pagination,\n          currentEnd,\n          currentStart: currentEnd,\n          sliceStart: 0,\n          isPaginating: true,\n        };\n      });\n\n  const onNext = () =>\n      setPagination(({ sliceStart, currentStart, ...pagination }) => {\n        if (sliceStart >= SLICE_SIZE) {\n          return {\n            ...pagination,\n            currentStart,\n            sliceStart: sliceStart - SLICE_SIZE,\n            isPaginating: !(currentStart == 0 && sliceStart == SLICE_SIZE),\n          };\n        }\n\n        if (currentStart >= PAGINATION_SIZE) {\n          if (currentStart) {\n            return {\n              ...pagination,\n              currentStart: currentStart - PAGINATION_SIZE,\n              sliceStart: PAGINATION_SIZE - SLICE_SIZE,\n            };\n          }\n        }\n\n        return {\n          ...pagination,\n          currentStart: 0,\n          sliceStart: 0,\n          isPaginating: false,\n        };\n      });\n\n  const { currentStart, currentEnd, sliceStart, isPaginating } = pagination;\n\n  const isEnd = currentEnd == -1 && sliceStart >= messages.length - SLICE_SIZE;\n\n  const pinnedMessages = messages.filter(m => m.isPinned);\n  const subheader = !messages.length\n      ? `Messages (None)`\n      : `Messages [${currentStart + sliceStart + 1}...${\n          Math.min(currentStart + messages.length, currentStart + sliceStart + SLICE_SIZE)\n      }]`;\n\n  return (\n      <StepProvider value={fetchChannelMessages}>\n        {pinnedMessages.length > 0 && (\n            <>\n              <hr/>\n              <List subheader={<ListSubheader>Pinned Messages</ListSubheader>}>\n                {pinnedMessages.map(m => <Message key={m.messageId} {...m}/>)}\n              </List>\n            </>\n        )}\n        <hr/>\n        <List subheader={<ListSubheader>{subheader}</ListSubheader>} style={{ width: '100%' }}>\n          {!isEnd && (\n              <ListItem>\n                <Button variant=\"outlined\" color=\"secondary\" onClick={onPrev}>\n                  Previous messages\n                </Button>\n              </ListItem>\n          )}\n          {messages.slice(sliceStart, sliceStart + SLICE_SIZE).reverse().map(message => (\n              <Message key={message.messageId} {...message}/>\n          ))}\n          {isPaginating && (\n              <ListItem>\n                <Button variant=\"outlined\" color=\"secondary\" onClick={onNext}>Next messages</Button>\n              </ListItem>\n          )}\n        </List>\n        <AddMessage channelId={channelId}/>\n      </StepProvider>\n  );\n}\n\nexport default ChannelMessages;\n","import {\n  Avatar,\n  Button,\n  Grid,\n  IconButton,\n  Link,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListSubheader,\n  Typography,\n} from '@material-ui/core';\nimport PersonAdd from '@material-ui/icons/PersonAdd';\nimport PersonAddDisabled from '@material-ui/icons/PersonAddDisabled';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { isMatchingId } from '../../utils';\nimport { extractUId } from '../../utils/token';\nimport { useStep } from '../../utils/update';\nimport Placeholder from '../Placeholder';\nimport AddMemberDialog from './AddMemberDialog';\nimport ChannelMessages from './ChannelMessages';\n\nfunction Channel({ channelId, ...props }) {\n  const [loading, setLoading] = React.useState(true);\n  const [name, setName] = React.useState('');\n  const [members, setMembers] = React.useState([]);\n  const [owners, setOwners] = React.useState([]);\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  function fetchChannelData() {\n    makeRequest('GET', 'CHANNEL_DETAILS', {\n      token,\n      channelId,\n    }).then(({ data }) => {\n      const { name, ownerMembers, allMembers } = data;\n      // assumes members of form [{ uId, nameFirst, nameLast }]\n      setMembers(allMembers);\n      setOwners(ownerMembers);\n      setName(name);\n    })\n        .catch(err => {\n          console.log(err);\n          setMembers([]);\n          setOwners([]);\n          setName('');\n        })\n        .finally(() => setLoading(false));\n  }\n\n  useStep(fetchChannelData, [channelId, token], 2);\n\n  function joinChannel(channelId, token) {\n    makeRequest('POST', 'CHANNEL_JOIN', { token, channelId: Number.parseInt(channelId) })\n        .then(() => {\n          fetchChannelData(channelId, token);\n        })\n        .catch(err => console.log(err));\n  }\n\n  function leaveChannel(channelId, token) {\n    makeRequest('POST', 'CHANNEL_LEAVE', { token, channelId: Number.parseInt(channelId) })\n        .then(() => {\n          fetchChannelData(channelId, token);\n        })\n        .catch(err => console.log(err));\n  }\n\n  function addOwner(uId) {\n    makeRequest('POST', 'CHANNEL_ADDOWNER', { token, channelId: Number.parseInt(channelId), uId })\n        .then(() => {\n          fetchChannelData(channelId, token);\n        })\n        .catch(err => console.log(err));\n  }\n\n  function removeOwner(uId) {\n    makeRequest('POST', 'CHANNEL_REMOVEOWNER', { token, channelId: Number.parseInt(channelId), uId })\n        .then(() => {\n          fetchChannelData(channelId, token);\n        })\n        .catch(err => console.log(err));\n  }\n\n  function userIsMember(members) {\n    return members.find(member => isMatchingId(member.uId, uId)) !== undefined;\n  }\n\n  function userIsOwner(owners, uId) {\n    return owners.find(owner => isMatchingId(owner.uId, uId)) !== undefined;\n  }\n\n  const viewerIsMember = userIsMember(members);\n\n  return (\n      <>\n        {loading ? <Placeholder/> : (\n            <>\n              <Typography variant=\"h4\">{name.toUpperCase()}</Typography>\n              <List subheader={<ListSubheader>Members</ListSubheader>}>\n                {members.map(({ uId, nameFirst, nameLast, profileImgUrl }) => (\n                    <ListItem key={uId}>\n                      <ListItemAvatar>\n                        <Avatar\n                            style={{\n                              width: '50px',\n                              height: '50px',\n                              border: '1px solid #ccc',\n                            }}\n                            src={profileImgUrl}\n                        >\n                          {[nameFirst, nameLast]\n                              .filter(s => s != null && s !== '')\n                              .map(s =>\n                                  s[0],\n                              )\n                              .join('')}\n                        </Avatar>\n                      </ListItemAvatar>\n                      <ListItemText\n                          primary={(\n                              <>\n                                <Grid container alignItems=\"center\" spacing={1}>\n                                  <Grid item>\n                                    <Link href={`/profile/${uId}`}>\n                                      {`${nameFirst} ${nameLast}`}\n                                    </Link>\n                                    {`${userIsOwner(owners, uId) ? ' ' : ' '}`}\n                                  </Grid>\n                                  <Grid item>\n                                    {userIsOwner(owners, uId)\n                                        ? (\n                                            <IconButton\n                                                size=\"small\"\n                                                onClick={() => removeOwner(uId)}\n                                            >\n                                              <PersonAddDisabled/>\n                                            </IconButton>\n                                        )\n                                        : (\n                                            <IconButton\n                                                size=\"small\"\n                                                onClick={() => addOwner(uId)}\n                                            >\n                                              <PersonAdd/>\n                                            </IconButton>\n                                        )}\n                                  </Grid>\n                                </Grid>\n                              </>\n                          )}\n                      />\n                    </ListItem>\n                ))}\n                <ListItem key=\"invite_member\">\n                  {userIsMember(members)\n                      ? (\n                          <Grid container spacing={1}>\n                            <Grid item>\n                              <AddMemberDialog channelId={channelId}/>\n                            </Grid>\n                            <Grid item>\n                              <Button\n                                  variant=\"outlined\"\n                                  onClick={() => leaveChannel(channelId, token)}\n                              >\n                                Leave Channel\n                              </Button>\n                            </Grid>\n                          </Grid>\n                      )\n                      : (\n                          <Button\n                              variant=\"outlined\"\n                              color=\"primary\"\n                              onClick={() => joinChannel(channelId, token)}\n                          >\n                            Join Channel\n                          </Button>\n                      )}\n                </ListItem>\n              </List>\n              {viewerIsMember && <ChannelMessages channelId={channelId}/>}\n            </>\n        )}\n      </>\n  );\n}\n\nexport default Channel;\n","import { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport { drawerWidth } from '../../utils/constants';\n\nconst useStyles = makeStyles(theme => ({\n  body: {\n    [theme.breakpoints.up('sm')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n    },\n    padding: 20,\n  },\n  toolbar: theme.mixins.toolbar,\n}));\n\nfunction Body({ children }) {\n  const classes = useStyles();\n  return (\n      <div className={classes.body}>\n        {/* Padding */}\n        <div className={classes.toolbar}/>\n        {children}\n      </div>\n  );\n}\n\nexport default Body;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  FormControlLabel,\n  Grid,\n  MenuItem,\n  Radio,\n  RadioGroup,\n  Select,\n} from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { PERMISSION_IDS } from '../../utils/constants';\n\nfunction SetUserPermissionsDialog({ children, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [permissionId, setPermissionId] = React.useState(PERMISSION_IDS.MEMBER);\n  const [users, setUsers] = React.useState([]);\n  const [selectedUser, setSelectedUser] = React.useState('');\n  const token = React.useContext(AuthContext);\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      makeRequest('GET', 'USERS_ALL', { token })\n          .then(({ data }) => {\n            setUsers(data['users']);\n          })\n          .catch(err => console.log(err));\n    }\n    fetchUserData();\n  }, [token]);\n\n  const handleRadioChange = event => {\n    const newPermissionId = parseInt(event.target.value, 10);\n    setPermissionId(newPermissionId);\n  };\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (!event.target[0].value) {\n      return;\n    }\n\n    const uId = parseInt(event.target[0].value, 10);\n\n    makeRequest('POST', 'ADMIN_USERPERMISSION_CHANGE', {\n      token,\n      uId: Number.parseInt(uId),\n      permissionId: Number.parseInt(permissionId),\n    }).then(response => {\n      console.log(response);\n    }).catch(err => console.log(err));\n  }\n\n  return (\n      <>\n        <div onClick={handleClickOpen}>{children}</div>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Set User Permissions</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>\n                Select a user below to set permissions for this user\n              </DialogContentText>\n              <Grid container spacing={2} direction=\"row\" justify=\"center\" alignItems=\"center\">\n                <Grid item xs={12}>\n                  <Select\n                      style={{ width: '100%' }}\n                      id=\"uId\"\n                      onChange={handleUserSelect}\n                      value={selectedUser}\n                  >\n                    {users.map((d, idx) => {\n                      return (\n                          <MenuItem key={d.uId} value={d.uId}>{d.nameFirst} {d.nameLast}</MenuItem>\n                      );\n                    })}\n                  </Select>\n                </Grid>\n                <Grid container item justify=\"center\" alignItems=\"center\">\n                  <RadioGroup\n                      aria-label=\"position\"\n                      name=\"position\"\n                      value={permissionId}\n                      onChange={handleRadioChange}\n                      row\n                  >\n                    <FormControlLabel\n                        value={PERMISSION_IDS.MEMBER}\n                        control={<Radio color=\"primary\"/>}\n                        label=\"Member\"\n                        labelPlacement=\"bottom\"\n                    />\n                    <FormControlLabel\n                        value={PERMISSION_IDS.OWNER}\n                        control={<Radio color=\"primary\"/>}\n                        label=\"Owner\"\n                        labelPlacement=\"bottom\"\n                    />\n                  </RadioGroup>\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Set</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </>\n  );\n}\n\nexport default SetUserPermissionsDialog;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Grid,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\n\nfunction UserRemoveDialog({ children, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [users, setUsers] = React.useState([]);\n  const [selectedUser, setSelectedUser] = React.useState('');\n  const token = React.useContext(AuthContext);\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      makeRequest('GET', 'USERS_ALL', { token })\n          .then(({ data }) => {\n            setUsers(data['users']);\n          })\n          .catch(err => console.log(err));\n    }\n\n    fetchUserData();\n  }, [token]);\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (!event.target[0].value) {\n      return;\n    }\n\n    const uId = parseInt(event.target[0].value, 10);\n\n    makeRequest('DELETE', 'ADMIN_USER_REMOVE', {\n      token,\n      uId: Number.parseInt(uId),\n    }).then(response => {\n      console.log(response);\n    }).catch(err => console.log(err));\n  }\n\n  return (\n      <>\n        <div onClick={handleClickOpen}>{children}</div>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Remove Users</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>Select a user below to remove</DialogContentText>\n              <Grid container spacing={2} direction=\"row\" justify=\"center\" alignItems=\"center\">\n                <Grid item xs={12}>\n                  <Select\n                      style={{ width: '100%' }}\n                      id=\"uId\"\n                      onChange={handleUserSelect}\n                      value={selectedUser}\n                  >\n                    {users.map(d => {\n                      return (\n                          <MenuItem key={d.uId} value={d.uId}>{d.nameFirst} {d.nameLast}</MenuItem>\n                      );\n                    })}\n                  </Select>\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Remove</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </>\n  );\n}\n\nexport default UserRemoveDialog;\n","import Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport React from 'react';\nimport SetUserPermissionsDialog from './SetUserPermissionsDialog';\nimport UserRemoveDialog from './UserRemoveDialog';\n\nexport default function Admin() {\n  const [open, setOpen] = React.useState(false);\n  const buttonRef = React.useRef();\n\n  const handleClick = event => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  return (\n      <div>\n        <Button\n            ref={buttonRef}\n            aria-controls=\"simple-menu\"\n            aria-haspopup=\"true\"\n            onClick={handleClick}\n            color=\"inherit\"\n        >\n          Admin\n        </Button>\n        <Menu\n            id=\"simple-menu\"\n            anchorEl={buttonRef.current}\n            keepMounted\n            open={open}\n            onClose={handleClose}\n        >\n          <SetUserPermissionsDialog>\n            <MenuItem onClick={handleClose}>Set User Permissions</MenuItem>\n          </SetUserPermissionsDialog>\n          <UserRemoveDialog>\n            <MenuItem onClick={handleClose}>Remove Users</MenuItem>\n          </UserRemoveDialog>\n          <MenuItem onClick={handleClose}>Close</MenuItem>\n        </Menu>\n      </div>\n  );\n}\n","import Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeRequest } from '../utils/axios_wrapper';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../AuthContext';\n\nexport default function NotificationList() {\n  const [open, setOpen] = React.useState(false);\n  const [notifs, setNotifs] = React.useState([]);\n  const buttonRef = React.useRef();\n  const token = React.useContext(AuthContext);\n\n  React.useEffect(() => {\n    makeRequest('GET', 'NOTIFICATIONS_GET', { token })\n        .then(({ data }) => {\n          setNotifs(data.notifications);\n        })\n        .catch(err => console.log(err));\n  }, [open, token]);\n\n  const handleClick = event => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  return (\n      <div>\n        <Button\n            ref={buttonRef}\n            aria-controls=\"simple-menu\"\n            aria-haspopup=\"true\"\n            onClick={handleClick}\n            color=\"inherit\"\n        >\n          Notifications\n        </Button>\n        <Menu\n            id=\"simple-menu\"\n            anchorEl={buttonRef.current}\n            keepMounted\n            open={open}\n            onClose={handleClose}\n        >\n          {notifs.length === 0 ? <div>&nbsp;You don't have any notifications.&nbsp;</div> : (\n              notifs.map(notif => {\n                if (notif.dmId === -1) {\n                  return (\n                      <MenuItem component={Link} to={`/channel/${notif.channelId}`}>\n                        {notif.notificationMessage}\n                      </MenuItem>\n                  );\n                } else {\n                  return (\n                      <MenuItem component={Link} to={`/dm/${notif.dmId}`}>\n                        {notif.notificationMessage}\n                      </MenuItem>\n                  );\n                }\n              })\n          )}\n          <MenuItem onClick={handleClose}>Close</MenuItem>\n        </Menu>\n      </div>\n  );\n}\n","import Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport React from 'react';\nimport { getIsPolling, setIsPolling, step, usePolling } from '../../utils/update';\n\nconst options = ['Live', 'Step'];\n\nfunction PollToggle() {\n  const [open, setOpen] = React.useState(false);\n  const anchorRef = React.useRef(null);\n  const [selectedIndex, setSelectedIndex] = React.useState(getIsPolling() ? 0 : 1);\n\n  usePolling();\n\n  const handleClick = () => {\n    step();\n  };\n\n  const handleMenuItemClick = (event, index) => {\n    setIsPolling(index === 0);\n    setSelectedIndex(index);\n    setOpen(false);\n  };\n\n  const handleToggle = () => {\n    setOpen(prevOpen => !prevOpen);\n  };\n\n  const handleClose = event => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n    setOpen(false);\n  };\n\n  return (\n      <>\n        <ButtonGroup\n            variant=\"contained\"\n            color=\"primary\"\n            ref={anchorRef}\n            aria-label=\"split button\"\n            style={{ marginRight: 15 }}\n        >\n          <Button onClick={handleClick} disabled={selectedIndex === 0}>\n            {options[selectedIndex]}\n          </Button>\n          <Button\n              color=\"primary\"\n              size=\"small\"\n              aria-owns={open ? 'menu-list-grow' : undefined}\n              aria-haspopup=\"true\"\n              onClick={handleToggle}\n          >\n            <ArrowDropDownIcon/>\n          </Button>\n        </ButtonGroup>\n        <Popper open={open} anchorEl={anchorRef.current} transition disablePortal>\n          {({ TransitionProps, placement }) => (\n              <Grow\n                  {...TransitionProps}\n                  style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                  }}\n              >\n                <Paper id=\"menu-list-grow\">\n                  <ClickAwayListener onClickAway={handleClose}>\n                    <MenuList>\n                      {options.map((option, index) => (\n                          <MenuItem\n                              key={option}\n                              disabled={index === 2}\n                              selected={index === selectedIndex}\n                              onClick={event => handleMenuItemClick(event, index)}\n                          >\n                            {option}\n                          </MenuItem>\n                      ))}\n                    </MenuList>\n                  </ClickAwayListener>\n                </Paper>\n              </Grow>\n          )}\n        </Popper>\n      </>\n  );\n}\n\nexport default PollToggle;\n","import InputBase from '@material-ui/core/InputBase';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport SearchIcon from '@material-ui/icons/Search';\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nconst useStyles = makeStyles(theme => ({\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(1),\n      width: 'auto',\n      marginRight: theme.spacing(2),\n    },\n  },\n  searchIcon: {\n    width: theme.spacing(7),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  inputRoot: {\n    color: 'inherit',\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 7),\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: 120,\n      '&:focus': {\n        width: 200,\n      },\n    },\n  },\n}));\n\nfunction SearchBar(props) {\n  const classes = useStyles();\n\n  const [queryStr, setQueryStr] = React.useState('');\n\n  const onSubmit = () => props.history.push(`/search/${queryStr}`);\n\n  return (\n      <form onSubmit={onSubmit}>\n        <div className={classes.search}>\n          <div className={classes.searchIcon}>\n            <SearchIcon/>\n          </div>\n          <InputBase\n              placeholder=\"Search\"\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              inputProps={{ 'aria-label': 'search' }}\n              value={queryStr}\n              onChange={e => setQueryStr(e.target.value)}\n          />\n        </div>\n      </form>\n  );\n}\n\nexport default withRouter(SearchBar);\n","import { AppBar, Button, IconButton, Toolbar, Typography } from '@material-ui/core';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { drawerWidth } from '../../utils/constants';\nimport Admin from '../Admin';\nimport NotificationList from '../NotificationList';\nimport PollToggle from '../PollToggle';\nimport SearchBar from '../Search/SearchBar';\n\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    marginLeft: drawerWidth,\n    [theme.breakpoints.up('sm')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n    },\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  logoutButton: {\n    float: 'right',\n  },\n}));\n\nfunction Header({ handleMenuToggle = () => {} }) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n  const token = React.useContext(AuthContext);\n  const [loggedOut, setLoggedOut] = React.useState(false);\n\n  if (loggedOut) {\n    makeRequest('POST', 'AUTH_LOGOUT', { token })\n        .then(response => {\n          console.log(response);\n        })\n        .catch(err => console.log(err));\n    localStorage.removeItem('token');\n    localStorage.removeItem('uId');\n    return <Redirect to=\"/login\"/>;\n  }\n\n  return (\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>\n          {!matches && (\n              <>\n                <IconButton\n                    color=\"inherit\"\n                    aria-label=\"open drawer\"\n                    edge=\"start\"\n                    onClick={handleMenuToggle}\n                    className={classes.menuButton}\n                >\n                  <MenuIcon/>\n                </IconButton>\n                <Link to=\"/\" style={{ color: 'white', textDecoration: 'none' }}>\n                  <Typography variant=\"h5\" noWrap>Memes</Typography>\n                </Link>\n              </>\n          )}\n          <div variant=\"h6\" className={classes.title}></div>\n          <div style={{ display: 'flex' }}>\n            <SearchBar/>\n            <PollToggle/>\n            <NotificationList/>\n            <Admin/>\n            <Button\n                color=\"inherit\"\n                className={classes.logoutButton}\n                onClick={() => {\n                  setLoggedOut(true);\n                }}\n            >\n              Logout\n            </Button>\n          </div>\n        </Toolbar>\n      </AppBar>\n  );\n}\n\nexport default Header;\n","import { Divider, Drawer, Hidden, Typography } from '@material-ui/core';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { drawerWidth } from '../../utils/constants';\n\nconst useStyles = makeStyles(theme => ({\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  toolbar: {\n    ...theme.mixins.toolbar,\n    display: 'flex',\n    alignItems: 'center',\n    paddingLeft: theme.spacing(2),\n  },\n}));\n\nfunction SideMenu({ container, children, open, setOpen }) {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  return (\n      <nav className={classes.drawer} aria-label=\"channels\">\n        {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n              container={container}\n              variant=\"temporary\"\n              anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n              open={open}\n              onClose={() => setOpen(false)}\n              classes={{\n                paper: classes.drawerPaper,\n              }}\n              ModalProps={{\n                keepMounted: true, // Better open performance on mobile.\n              }}\n          >\n            <div className={classes.toolbar}/>\n            <Divider/>\n            {children}\n          </Drawer>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n              classes={{\n                paper: classes.drawerPaper,\n              }}\n              variant=\"permanent\"\n              open\n          >\n            <div className={classes.toolbar}>\n              <Link to=\"/\" style={{ color: 'black', textDecoration: 'none' }}>\n                <Typography variant=\"h5\" noWrap>Treats</Typography>\n              </Link>\n            </div>\n            {children}\n          </Drawer>\n        </Hidden>\n      </nav>\n  );\n}\n\nexport default SideMenu;\n","import React from 'react';\nimport Body from './Body';\nimport Header from './Header';\nimport SideMenu from './SideMenu';\n\nfunction Layout({ menu, body }) {\n  const [open, setOpen] = React.useState(false);\n  function handleMenuToggle() {\n    setOpen(open => !!!open);\n  }\n  return (\n      <div style={{ display: 'flex' }}>\n        <Header handleMenuToggle={handleMenuToggle}/>\n        <SideMenu open={open} setOpen={setOpen}>{menu}</SideMenu>\n        <Body>{body}</Body>\n      </div>\n  );\n}\n\nexport default Layout;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  FormControlLabel,\n  Grid,\n  IconButton,\n  Switch,\n  TextField,\n} from '@material-ui/core';\nimport Add from '@material-ui/icons/Add';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\n\nfunction AddChannelDialog({ ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const token = React.useContext(AuthContext);\n  function handleClickOpen() {\n    setOpen(true);\n  }\n  function handleClose() {\n    setOpen(false);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const name = event.target[0].value;\n    const secret = event.target[1].checked;\n    const isPublic = !secret;\n\n    if (!name) {\n      return;\n    }\n\n    makeRequest('POST', 'CHANNELS_CREATE', { token, name, isPublic })\n        .then(response => {\n          console.log(response);\n          props.callback();\n        })\n        .catch(err => console.log(err));\n  }\n\n  return (\n      <div>\n        <IconButton size=\"small\" onClick={handleClickOpen}>\n          <Add/>\n        </IconButton>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Create Channel</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>Complete the form below to create a new channel</DialogContentText>\n              <Grid container spacing={2} direction=\"row\" justify=\"center\" alignItems=\"center\">\n                <Grid item xs={12}>\n                  <TextField\n                      autoFocus\n                      margin=\"dense\"\n                      id=\"channelName\"\n                      label=\"Channel Name\"\n                      name=\"channelName\"\n                      fullWidth\n                  />\n                </Grid>\n                <Grid container item justify=\"center\" alignItems=\"center\">\n                  <Visibility/>\n                  <FormControlLabel\n                      control={<Switch value=\"secret\" inputProps={{ 'aria-label': 'Secret' }}/>}\n                      label=\"Secret\"\n                      labelPlacement=\"top\"\n                  />\n                  <VisibilityOff/>\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Create</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </div>\n  );\n}\n\nexport default AddChannelDialog;\n","import { List, ListItem, ListItemIcon, ListItemText, ListSubheader } from '@material-ui/core';\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\nimport axios from 'axios';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../AuthContext';\nimport { makeRequest } from '../utils/axios_wrapper';\nimport { useStep } from '../utils/update';\nimport AddChannelDialog from './Channel/AddChannelDialog';\n\nfunction ChannelList({ channelId: currChannelId }) {\n  const [myChannels, setMyChannels] = React.useState([]);\n  const [allChannels, setAllChannels] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const fetchChannelsData = () => {\n    // fetch channels data\n    const getMyChannels = makeRequest('GET', 'CHANNELS_LIST', { token });\n    const getAllChannels = makeRequest('GET', 'CHANNELS_LISTALL', { token });\n\n    axios.all([\n      getMyChannels,\n      getAllChannels,\n    ]).then(axios.spread((myChannelResponse, allChannelResponse) => {\n      const myChannelData = myChannelResponse.data.channels;\n      const allChannelData = allChannelResponse.data.channels;\n      const filteredChannels = allChannelData.filter(channel => {\n        return (\n            myChannelData.find(c => c.channelId === channel.channelId) === undefined\n        );\n      });\n      setMyChannels(myChannelData);\n      setAllChannels(filteredChannels);\n    }));\n  };\n\n  useStep(fetchChannelsData, [], 2);\n\n  return (\n      <>\n        <List\n            subheader={(\n                <ListSubheader style={{ display: 'flex' }}>\n                  <span style={{ flex: 1 }}>My Channels</span>\n                  <AddChannelDialog callback={fetchChannelsData}/>\n                </ListSubheader>\n            )}\n        >\n          {myChannels.map(({ channelId, name }, index) => (\n              <ListItem button key={channelId} component={Link} to={`/channel/${channelId}`}>\n                <ListItemIcon>\n                  {channelId == currChannelId\n                      ? <RadioButtonCheckedIcon/>\n                      : <RadioButtonUncheckedIcon/>}\n                </ListItemIcon>\n                <ListItemText primary={name}/>\n              </ListItem>\n          ))}\n        </List>\n        <List subheader={<ListSubheader>Other Channels</ListSubheader>}>\n          {allChannels.map(({ channelId, name }, index) => (\n              <ListItem button key={channelId} component={Link} to={`/channel/${channelId}`}>\n                <ListItemIcon>\n                  {channelId == currChannelId\n                      ? <RadioButtonCheckedIcon/>\n                      : <RadioButtonUncheckedIcon/>}\n                </ListItemIcon>\n                <ListItemText primary={name}/>\n              </ListItem>\n          ))}\n        </List>\n      </>\n  );\n}\n\nexport default ChannelList;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  IconButton,\n  Input,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\nimport Add from '@material-ui/icons/Add';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { extractUId } from '../../utils/token';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n};\n\nfunction AddDmDialog({ ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedUsers, setSelectedUsers] = React.useState([]);\n  const [users, setUsers] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  React.useEffect(() => {\n    function fetchUserData() {\n      makeRequest('GET', 'USERS_ALL', { token })\n          .then(({ data }) => {\n            setUsers(data['users']);\n          })\n          .catch(err => console.log(err));\n    }\n    fetchUserData();\n  }, [token]);\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleUserSelect(event) {\n    setSelectedUsers(event.target.value);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    makeRequest('POST', 'DM_CREATE', { token, uIds: selectedUsers })\n        .then(response => {\n          console.log(response);\n          props.callback();\n        })\n        .catch(err => console.log(err));\n  }\n  return (\n      <div>\n        <IconButton size=\"small\" onClick={handleClickOpen}>\n          <Add/>\n        </IconButton>\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Create Dm</DialogTitle>\n          <form onSubmit={handleSubmit}>\n            <DialogContent>\n              <DialogContentText>Select the users below to create a new dm</DialogContentText>\n              <Select\n                  multiple\n                  value={selectedUsers}\n                  onChange={handleUserSelect}\n                  input={<Input/>}\n                  MenuProps={MenuProps}\n                  style={{ width: '100%' }}\n              >\n                {users.map(d => {\n                  if (uId != d.uId) {\n                    return (\n                        <MenuItem key={d.uId} value={d.uId}>\n                          {d.nameFirst + ' ' + d.nameLast}\n                        </MenuItem>\n                    );\n                  }\n                })}\n              </Select>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} color=\"primary\">Cancel</Button>\n              <Button onClick={handleClose} type=\"submit\" color=\"primary\">Create</Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </div>\n  );\n}\n\nexport default AddDmDialog;\n","import { List, ListItem, ListItemIcon, ListItemText, ListSubheader } from '@material-ui/core';\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\nimport { makeRequest } from '../utils/axios_wrapper';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../AuthContext';\nimport { useStep } from '../utils/update';\nimport AddDmDialog from './Dm/AddDmDialog';\n\nfunction DmList({ dmId: currDmId }) {\n  const [myDms, setMyDms] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const fetchDmsData = () => {\n    makeRequest('GET', 'DM_LIST', { token })\n        .then(({ data }) => {\n          setMyDms(data['dms']);\n        })\n        .catch(err => console.log(err));\n  };\n\n  useStep(fetchDmsData, [], 2);\n\n  return (\n      <>\n        <List\n            subheader={(\n                <ListSubheader style={{ display: 'flex' }}>\n                  <span style={{ flex: 1 }}>My Dms</span>\n                  <AddDmDialog callback={fetchDmsData}/>\n                </ListSubheader>\n            )}\n        >\n          {myDms.map(({ dmId, name }) => (\n              <ListItem button key={dmId} component={Link} to={`/dm/${dmId}`}>\n                <ListItemIcon>\n                  {dmId == currDmId\n                      ? <RadioButtonCheckedIcon/>\n                      : <RadioButtonUncheckedIcon/>}\n                </ListItemIcon>\n                <ListItemText primary={name}/>\n              </ListItem>\n          ))}\n        </List>\n      </>\n  );\n}\n\nexport default DmList;\n","import { List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../AuthContext';\nimport { extractUId } from '../utils/token';\n\nfunction ProfileList() {\n  const uid = extractUId(React.useContext(AuthContext));\n  return (\n      <List>\n        <ListItem button key={'profile'} component={Link} to={`/profile/${uid}`}>\n          <ListItemIcon>\n            <AccountCircle/>\n          </ListItemIcon>\n          <ListItemText primary=\"Profile\"/>\n        </ListItem>\n      </List>\n  );\n}\n\nexport default ProfileList;\n","import React from 'react';\nimport ChannelList from './ChannelList';\nimport DmList from './DmList';\nimport ProfileList from './ProfileList';\n\nfunction ProfileChannelLists({ channelId, dmId }) {\n  return (\n      <>\n        <ProfileList/>\n        <ChannelList channelId={channelId}/>\n        <DmList dmId={dmId}/>\n      </>\n  );\n}\n\nexport default ProfileChannelLists;\n","import React from 'react';\nimport Channel from '../components/Channel';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\n\nfunction ChannelPage({ match }) {\n  const { channelId } = match.params;\n  return (\n      <Layout\n          menu={<ProfileChannelLists channelId={channelId} dmId={null}/>}\n          body={<Channel channelId={channelId}/>}\n      />\n  );\n}\n\nexport default ChannelPage;\n","import {\n  Avatar,\n  Button,\n  Grid,\n  Link,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListSubheader,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { useStep } from '../../utils/update';\nimport Placeholder from '../Placeholder';\nimport DmMessages from './DmMessages';\n\nfunction Dm({ dmId, ...props }) {\n  const [loading, setLoading] = React.useState(true);\n  const [name, setName] = React.useState('');\n  const [membersList, setMembersList] = React.useState([]);\n  const token = React.useContext(AuthContext);\n\n  function fetchDmData() {\n    makeRequest('GET', 'DM_DETAILS', {\n      token,\n      dmId,\n    }).then(({ data }) => {\n      const { name, members } = data;\n      // assumes members of form [{ uId, nameFirst, nameLast }]\n      console.log(members);\n      setMembersList(members);\n      setName(name);\n    })\n        .catch(err => {\n          console.log(err)\n          setMembersList([]);\n          setName('');\n        })\n        .finally(() => setLoading(false));\n  }\n\n  useStep(fetchDmData, [dmId, token], 2);\n\n  function leaveDm(dmId, token) {\n    makeRequest('POST', 'DM_LEAVE', { token, dmId: Number.parseInt(dmId) })\n        .then(() => {\n          fetchDmData(dmId, token);\n        })\n        .catch(err => console.log(err));\n  }\n\n  function removeDm(dmId, token) {\n    makeRequest('DELETE', 'DM_REMOVE', {\n      token,\n      dmId: Number.parseInt(dmId),\n    }).then(() => {\n      fetchDmData(dmId, token);\n    }).catch(err => console.log(err));\n  }\n\n  return (\n      <>\n        {loading ? <Placeholder/> : (\n            <>\n              <Typography variant=\"h4\">{name.toUpperCase()}</Typography>\n              <List subheader={<ListSubheader>Members</ListSubheader>}>\n                {membersList.map(({ uId, nameFirst, nameLast, profileImgUrl }) => (\n                    <ListItem key={uId}>\n                      <ListItemAvatar>\n                        <Avatar\n                            style={{\n                              width: '50px',\n                              height: '50px',\n                              border: '1px solid #ccc',\n                            }}\n                            src={profileImgUrl}\n                        >\n                          {[nameFirst, nameLast]\n                              .filter(s =>\n                                  s != null && s !== '',\n                              )\n                              .map(s => s[0])\n                              .join('')}\n                        </Avatar>\n                      </ListItemAvatar>\n                      <ListItemText\n                          primary={(\n                              <>\n                                <Grid container alignItems=\"center\" spacing={1}>\n                                  <Grid item>\n                                    <Link href={`/profile/${uId}`}>\n                                      {`${nameFirst} ${nameLast}`}\n                                    </Link>\n                                  </Grid>\n                                </Grid>\n                              </>\n                          )}\n                      />\n                    </ListItem>\n                ))}\n                <ListItem key=\"leave_dm\">\n                  <Grid container spacing={1}>\n                    <Grid item>\n                      <Button variant=\"outlined\" onClick={() => leaveDm(dmId, token)}>\n                        Leave Dm\n                      </Button>\n                      &nbsp;\n                      <Button variant=\"outlined\" onClick={() => removeDm(dmId, token)}>\n                        Remove Dm\n                      </Button>\n                    </Grid>\n                  </Grid>\n                </ListItem>\n              </List>\n              <DmMessages dmId={dmId}/>\n            </>\n        )}\n      </>\n  );\n}\n\nexport default Dm;\n","import React from 'react';\nimport Dm from '../components/Dm';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\n\nfunction DmPage({ match }) {\n  const { dmId } = match.params;\n  return (\n      <Layout menu={<ProfileChannelLists channelId={null} dmId={dmId}/>} body={<Dm dmId={dmId}/>}/>\n  );\n}\n\nexport default DmPage;\n","import {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\nimport Placeholder from '../components/Placeholder';\nimport { makeRequest } from '../utils/axios_wrapper';\n\nconst useStyles = makeStyles(theme => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction ForgotPasswordPage(props) {\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const email = event.target[0].value;\n\n    // Quick validation\n    if (!email) {\n      return;\n    }\n\n    setLoading(true);\n\n    // Send to backend\n    makeRequest('POST', 'AUTH_PASSWORDRESET_REQUEST', { email })\n        .then(response => {\n          console.log(response);\n          props.history.push('/reset_password');\n        })\n        .catch(err => console.log(err))\n        .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Box boxShadow={3} className={classes.card}>\n          <Avatar>\n            <DeveloperOutlinedIcon color=\"secondary\"/>\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">Forgot Password</Typography>\n          {loading\n              ? (\n                  <div style={{ marginTop: '64px' }}>\n                    <Placeholder/>\n                  </div>\n              )\n              : (\n                  <form noValidate onSubmit={handleSubmit}>\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"email\"\n                        label=\"Email\"\n                        name=\"email\"\n                        type=\"email\"\n                        autoFocus\n                    />\n                    <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n                      Send Recovery Email\n                    </Button>\n                    <Grid container>\n                      <Grid item>\n                        <br/>\n                        <Link href=\"/login\" variant=\"body1\">{'Remember your password? Login'}</Link>\n                      </Grid>\n                    </Grid>\n                  </form>\n              )}\n        </Box>\n      </Container>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import { Typography } from '@material-ui/core';\nimport React from 'react';\nimport { Scatter } from 'react-chartjs-2';\nimport AuthContext from '../AuthContext';\nimport { makeRequest } from '../utils/axios_wrapper';\n\nfunction WorkspaceStats() {\n  const token = React.useContext(AuthContext);\n  const [utilizationRate, setUtilizationRate] = React.useState(0);\n  const [channelsData, setChannelsData] = React.useState([]);\n  const [dmsData, setDmsData] = React.useState([]);\n  const [messagesData, setMessagesData] = React.useState([]);\n\n  React.useEffect(() => {\n    makeRequest('GET', 'USERS_STATS', { token })\n        .then(({ data }) => {\n          console.log(data);\n          const { workspaceStats } = data;\n          setUtilizationRate(workspaceStats['utilizationRate']);\n          setChannelsData(workspaceStats['channelsExist'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numChannelsExist'],\n            };\n          }));\n          setDmsData(workspaceStats['dmsExist'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numDmsExist'],\n            };\n          }));\n          setMessagesData(workspaceStats['messagesExist'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numMessagesExist'],\n            };\n          }));\n        })\n        .catch(err => console.log(err));\n  }, [token]);\n\n  return (\n      <>\n        <Typography variant=\"h5\">Workspace statistics</Typography>\n        <p>Wow! {(utilizationRate * 100).toFixed(2)}% utilisation</p>\n        <Scatter\n            data={{\n              datasets: [\n                {\n                  label: 'Channels',\n                  data: channelsData,\n                  fill: false,\n                  borderColor: '#742774',\n                  showLine: true,\n                },\n                {\n                  label: 'Dms',\n                  data: dmsData,\n                  fill: false,\n                  borderColor: '#4287f5',\n                  showLine: true,\n                },\n                {\n                  label: 'Messages',\n                  data: messagesData,\n                  fill: false,\n                  borderColor: '#bd2d4f',\n                  showLine: true,\n                },\n              ],\n            }}\n            options={{\n              scales: {\n                xAxes: [{\n                  title: 'time',\n                  type: 'time',\n                  gridLines: {\n                    lineWidth: 2,\n                  },\n                  time: {\n                    unitStepSize: 200,\n                    displayFormats: {\n                      millisecond: 'MMM DD HH:mm',\n                      second: 'MMM DD HH:mm',\n                      minute: 'MMM DD HH:mm',\n                      hour: 'MMM DD HH:mm',\n                      day: 'MMM DD',\n                      week: 'MMM DD',\n                      month: 'MMM DD',\n                      quarter: 'MMM DD',\n                      year: 'MMM DD',\n                    },\n                  },\n                }],\n              },\n            }}\n        />\n      </>\n  );\n}\n\nexport default WorkspaceStats;\n","import { Typography } from '@material-ui/core';\nimport React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport WorkspaceStats from '../components/WorkspaceStats';\n\nfunction HomePage() {\n  return (\n      <Layout\n          menu={<ProfileChannelLists/>}\n          body={(\n              <>\n                <Typography variant=\"h4\">WELCOME</Typography>\n                <div style={{ paddingTop: 15 }}>\n                  <Typography variant=\"body1\">\n                    This is Memes: agile messaging for Software Engineers\n                  </Typography>\n                </div>\n                <br/>\n                <WorkspaceStats/>\n              </>\n          )}\n      />\n  );\n}\n\nexport default HomePage;\n","import {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport React from 'react';\nimport '../App.css';\nimport Placeholder from '../components/Placeholder';\nimport { makeRequest } from '../utils/axios_wrapper';\n\nconst useStyles = makeStyles(theme => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction LoginPage({ setAuth, ...props }) {\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const email = event.target[0].value;\n    const password = event.target[2].value;\n\n    // Quick validation\n    if (!email || !password) {\n      return;\n    }\n\n    setLoading(true);\n\n    // Send to backend\n    makeRequest('POST', 'AUTH_LOGIN', { email, password })\n        .then(response => {\n          console.log(response);\n          const data = response.data;\n          setAuth(data.token, data.authUserId);\n          props.history.push('/');\n        })\n        .catch(err => console.log(err))\n        .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Box boxShadow={3} className={classes.card}>\n          <Avatar>\n            <LockOutlinedIcon/>\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">Login</Typography>\n          {loading\n              ? (\n                  <div style={{ marginTop: '64px' }}>\n                    <Placeholder/>\n                  </div>\n              )\n              : (\n                  <form noValidate onSubmit={handleSubmit}>\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"email\"\n                        label=\"Email\"\n                        name=\"email\"\n                        type=\"text\"\n                        autoFocus\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        name=\"password\"\n                        label=\"Password\"\n                        type=\"password\"\n                        id=\"password\"\n                        autoComplete=\"current-password\"\n                    />\n                    <div className=\"password-warning\">\n                      Passwords are not securely stored.\n                      <br/>\n                      Do not enter any currently used passwords.\n                    </div>\n                    <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n                      Sign In\n                    </Button>\n                    <Grid container direction=\"column\" alignItems=\"center\">\n                      <Grid item>\n                        <br/>\n                        <Link href=\"/register\" variant=\"body1\">\n                          {\"Don't have an account? Register\"}\n                        </Link>\n                      </Grid>\n                      <Grid item>\n                        <br/>\n                        <Link href=\"/forgot_password\" variant=\"body1\">Forgot password?</Link>\n                      </Grid>\n                    </Grid>\n                  </form>\n              )}\n        </Box>\n      </Container>\n  );\n}\n\nexport default LoginPage;\n","import { Grid } from '@material-ui/core';\nimport Cancel from '@material-ui/icons/Cancel';\nimport Edit from '@material-ui/icons/Edit';\nimport Save from '@material-ui/icons/Save';\nimport React from 'react';\n\nfunction EditableFields({\n  editable,\n  master,\n  masterValue,\n  slaves,\n  slaveValues,\n  onSave,\n  ...props\n}) {\n  const [edit, setEdit] = React.useState(false);\n  const [prevMasterValue, setPrevMasterValue] = React.useState();\n  const [currMasterValue, setCurrMasterValue] = React.useState(masterValue);\n  const [prevSlaveValues, setPrevSlaveValues] = React.useState([]);\n  const [currSlaveValues, setCurrSlaveValues] = React.useState(slaveValues);\n\n  // Handle async passing of master/slave values\n  React.useEffect(() => {\n    setCurrMasterValue(masterValue);\n    setCurrSlaveValues(slaveValues);\n  }, [masterValue, slaveValues]);\n\n  function toggleEdit() {\n    setPrevMasterValue(currMasterValue);\n    setPrevSlaveValues(currSlaveValues);\n    setEdit(!edit);\n  }\n\n  function icons() {\n    if (!editable) {\n      return null;\n    }\n    if (edit) {\n      return (\n          <>\n            <Save\n                style={{ cursor: 'pointer' }}\n                onClick={() => {\n                  if (currMasterValue == null) {\n                    return;\n                  }\n                  if (onSave) {\n                    if (currSlaveValues) {\n                      onSave(currMasterValue, ...currSlaveValues);\n                    } else {\n                      onSave(currMasterValue);\n                    }\n                  }\n                  toggleEdit();\n                }}\n            />\n            <Cancel\n                style={{ cursor: 'pointer' }}\n                onClick={() => {\n                  setCurrMasterValue(prevMasterValue);\n                  setCurrSlaveValues(prevSlaveValues);\n                  toggleEdit();\n                }}\n            />\n          </>\n      );\n    }\n    return <Edit style={{ cursor: 'pointer' }} onClick={toggleEdit}/>;\n  }\n  function onSlaveChange(event, valueIndex) {\n    let copySlaves = currSlaveValues.map((val, idx) => {\n      if (idx === valueIndex) {\n        return event.target.value;\n      }\n      return val;\n    });\n    setCurrSlaveValues(copySlaves);\n  }\n\n  function onMasterChange(event) {\n    setCurrMasterValue(event.target.value);\n  }\n\n  return (\n      <Grid container spacing={1} alignItems=\"flex-end\">\n        {slaves && slaves.map((slave, idx) => {\n          return (\n              <Grid item key={idx}>\n                {slave({\n                  value: currSlaveValues[idx] || '', // \"\" required for label placeholder mechanics\n                  InputProps: { readOnly: !edit },\n                  onChange: event => onSlaveChange(event, idx),\n                })}\n              </Grid>\n          );\n        })}\n        <Grid item>\n          {master({\n            value: currMasterValue || '', // \"\" required for label placeholder mechanics\n            InputProps: { readOnly: !edit },\n            onChange: onMasterChange,\n          })}\n        </Grid>\n        {editable && <Grid item>{icons()}</Grid>}\n      </Grid>\n  );\n}\n\nexport default EditableFields;\n","import { Typography } from '@material-ui/core';\nimport React from 'react';\nimport { Scatter } from 'react-chartjs-2';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\n\nfunction UserStats() {\n  const token = React.useContext(AuthContext);\n  const [involvementRate, setInvolvementRate] = React.useState(0);\n  const [channelsData, setChannelsData] = React.useState([]);\n  const [dmsData, setDmsData] = React.useState([]);\n  const [messagesData, setMessagesData] = React.useState([]);\n\n  React.useEffect(() => {\n    makeRequest('GET', 'USER_STATS', { token })\n        .then(({ data }) => {\n          console.log(data);\n          const { userStats } = data;\n          setInvolvementRate(userStats['involvementRate']);\n          setChannelsData(userStats['channelsJoined'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numChannelsJoined'],\n            };\n          }));\n          setDmsData(userStats['dmsJoined'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numDmsJoined'],\n            };\n          }));\n          setMessagesData(userStats['messagesSent'].map(obj => {\n            return {\n              x: new Date(obj['timeStamp'] * 1000),\n              y: obj['numMessagesSent'],\n            };\n          }));\n        })\n        .catch(err => console.log(err));\n  }, [token]);\n\n  return (\n      <>\n        <Typography variant=\"h5\">User statistics</Typography>\n        <p>Involvement rate: {(involvementRate * 100).toFixed(2)}%</p>\n        <Scatter\n            data={{\n              datasets: [\n                {\n                  label: 'Channels joined',\n                  data: channelsData,\n                  fill: false,\n                  borderColor: '#742774',\n                  showLine: true,\n                },\n                {\n                  label: 'Dms joined',\n                  data: dmsData,\n                  fill: false,\n                  borderColor: '#4287f5',\n                  showLine: true,\n                },\n                {\n                  label: 'Messages sent',\n                  data: messagesData,\n                  fill: false,\n                  borderColor: '#bd2d4f',\n                  showLine: true,\n                },\n              ],\n            }}\n            options={{\n              scales: {\n                xAxes: [{\n                  title: 'time',\n                  type: 'time',\n                  gridLines: {\n                    lineWidth: 2,\n                  },\n                  time: {\n                    unitStepSize: 200,\n                    displayFormats: {\n                      millisecond: 'MMM DD HH:mm',\n                      second: 'MMM DD HH:mm',\n                      minute: 'MMM DD HH:mm',\n                      hour: 'MMM DD HH:mm',\n                      day: 'MMM DD',\n                      week: 'MMM DD',\n                      month: 'MMM DD',\n                      quarter: 'MMM DD',\n                      year: 'MMM DD',\n                    },\n                  },\n                }],\n              },\n            }}\n        />\n      </>\n  );\n}\n\nexport default UserStats;\n","import { List, ListItem, ListSubheader, TextField, Typography } from '@material-ui/core';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport { extractUId } from '../../utils/token';\nimport Placeholder from '../Placeholder';\nimport EditableFields from './EditableFields';\nimport UserStats from './UserStats';\n\nfunction Profile({ profile }) {\n  const [loading, setLoading] = React.useState(true);\n  const [profileDetails, setProfileDetails] = React.useState({});\n  const token = React.useContext(AuthContext);\n  const uId = extractUId(token);\n\n  React.useEffect(() => {\n    makeRequest('GET', 'USER_PROFILE', {\n      token,\n      uId: profile,\n    }).then(({ data }) => {\n      console.log(data);\n      const { user } = data;\n      setProfileDetails(user);\n    })\n        .catch(err => {console.log(err)})\n        .finally(() => setLoading(false));\n  }, [profile, token]);\n\n  function updateName(nameLast, nameFirst) {\n    makeRequest('PUT', 'USER_PROFILE_SETNAME', { token, nameFirst, nameLast })\n        .then(({ data }) => {\n          console.log(data);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n  }\n\n  function updateEmail(email) {\n    makeRequest('PUT', 'USER_PROFILE_SETEMAIL', { token, email })\n        .then(({ data }) => {\n          console.log(data);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n  }\n\n  function updateProfileImgUrl(rawText) {\n    const items = rawText.split(',');\n    makeRequest('POST', 'USER_PROFILE_UPLOADPHOTO', {\n      token,\n      imgUrl: items[0],\n      xStart: Number.parseInt(items[1]),\n      yStart: Number.parseInt(items[2]),\n      xEnd: Number.parseInt(items[3]),\n      yEnd: Number.parseInt(items[4]),\n    }).then(({ data }) => {\n      console.log(data);\n    }).catch(err => console.log(err));\n  }\n\n  function updateHandle(handleStr) {\n    makeRequest('PUT', 'USER_PROFILE_SETHANDLE', { token, handleStr })\n        .then(({ data }) => {\n          console.log(data);\n        })\n        .catch(err => console.log(err));\n  }\n\n  const editable = uId.toString() === profile;\n\n  return (\n      <>\n        <Typography variant=\"h4\">Profile</Typography>\n        {loading\n            ? <Placeholder/>\n            : (\n                <List subheader={<ListSubheader>Profile Details</ListSubheader>}>\n                  <ListItem key={'name'}>\n                    <EditableFields\n                        editable={editable}\n                        masterValue={profileDetails.nameLast}\n                        slaveValues={[profileDetails.nameFirst]}\n                        master={passedProps => <TextField label={'Last Name'} {...passedProps}/>}\n                        slaves={[passedProps => <TextField label={'First Name'} {...passedProps}/>]}\n                        onSave={updateName}\n                    />\n                  </ListItem>\n                  <ListItem key={'email'}>\n                    <EditableFields\n                        editable={editable}\n                        masterValue={profileDetails.email}\n                        master={passedProps => <TextField label={'Email'} {...passedProps}/>}\n                        onSave={updateEmail}\n                    />\n                  </ListItem>\n                  <ListItem key={'handle'}>\n                    <EditableFields\n                        editable={editable}\n                        masterValue={profileDetails.handleStr}\n                        master={passedProps => <TextField label={'Handle'} {...passedProps}/>}\n                        onSave={updateHandle}\n                    />\n                  </ListItem>\n                  <ListItem key={'imgUrl'}>\n                    <EditableFields\n                        editable={editable}\n                        masterValue={profileDetails.profileImgUrl}\n                        master={passedProps => (\n                            <TextField label={'imgUrl,x1,y1,x2,y2'} {...passedProps}/>\n                        )}\n                        onSave={updateProfileImgUrl}\n                    />\n                  </ListItem>\n                  <br/>\n                  <div>\n                    NOTE: The final field input is to set a profile image. Please enter the 5\n                    components (image url, xStart, yStart, xEnd, yEnd) separated by commas.\n                  </div>\n                </List>\n            )}\n        <br/>\n        {editable && <UserStats/>}\n      </>\n  );\n}\n\nexport default Profile;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport Profile from '../components/Profile';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\n\nfunction ProfilePage({ match }) {\n  const { profile } = match.params;\n  return <Layout menu={<ProfileChannelLists/>} body={<Profile profile={profile}/>}/>;\n}\n\nexport default ProfilePage;\n","import {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\nimport Placeholder from '../components/Placeholder';\nimport { makeRequest } from '../utils/axios_wrapper';\n\nconst useStyles = makeStyles(theme => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction RegisterPage({ setAuth, ...props }) {\n  const [loading, setLoading] = React.useState(false);\n  const [values, setValues] = React.useState({\n    nameFirst: '',\n    nameLast: '',\n    email: '',\n    password: '',\n  });\n\n  const handleChange = name =>\n      event => {\n        setValues({ ...values, [name]: event.target.value });\n      };\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Quick validation\n    if (!values.email || !values.password) {\n      return;\n    }\n\n    setLoading(true);\n\n    // Send to backend\n    makeRequest('POST', 'AUTH_REGISTER', { ...values })\n        .then(response => {\n          console.log(response);\n          const data = response.data;\n          setAuth(data.token, data.authUserId);\n          props.history.push('/');\n        })\n        .catch(err => console.log(err))\n        .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Box boxShadow={3} className={classes.card}>\n          <Avatar>\n            <DeveloperOutlinedIcon color=\"secondary\"/>\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">Register</Typography>\n          {loading\n              ? (\n                  <div style={{ marginTop: '64px' }}>\n                    <Placeholder/>\n                  </div>\n              )\n              : (\n                  <form noValidate onSubmit={handleSubmit}>\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"nameFirst\"\n                        label=\"First name\"\n                        name=\"nameFirst\"\n                        type=\"text\"\n                        autoFocus\n                        value={values.nameFirst}\n                        onChange={handleChange('nameFirst')}\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"nameLast\"\n                        label=\"Last name\"\n                        name=\"nameLast\"\n                        type=\"text\"\n                        value={values.nameLast}\n                        onChange={handleChange('nameLast')}\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"email\"\n                        label=\"Email\"\n                        name=\"email\"\n                        type=\"email\"\n                        value={values.email}\n                        onChange={handleChange('email')}\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        name=\"password\"\n                        label=\"Password\"\n                        type=\"password\"\n                        id=\"password\"\n                        autoComplete=\"current-password\"\n                        value={values.password}\n                        onChange={handleChange('password')}\n                    />\n                    <div className=\"password-warning\">\n                      Passwords are not securely stored.\n                      <br/>\n                      Do not enter any currently used passwords.\n                    </div>\n                    <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n                      Sign Up\n                    </Button>\n                    <Grid container>\n                      <Grid item>\n                        <br/>\n                        <Link href=\"/login\" variant=\"body1\">\n                          {'Already have an account? Login'}\n                        </Link>\n                      </Grid>\n                    </Grid>\n                  </form>\n              )}\n        </Box>\n      </Container>\n  );\n}\n\nexport default RegisterPage;\n","import {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\nimport Placeholder from '../components/Placeholder';\nimport { makeRequest } from '../utils/axios_wrapper';\n\nconst useStyles = makeStyles(theme => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction ForgotPasswordPage(props) {\n  const [loading, setLoading] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const resetCode = event.target[0].value;\n    const newPassword = event.target[2].value;\n\n    // Quick validation\n    if (!resetCode || !newPassword) {\n      return;\n    }\n\n    setLoading(true);\n\n    // Send to backend\n    makeRequest('POST', 'AUTH_PASSWORDRESET_RESET', { resetCode, newPassword })\n        .then(response => {\n          console.log(response);\n          props.history.push('/login');\n        })\n        .catch(err => console.log(err))\n        .finally(() => setLoading(false));\n  }\n\n  const classes = useStyles();\n\n  return (\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Box boxShadow={3} className={classes.card}>\n          <Avatar>\n            <DeveloperOutlinedIcon color=\"secondary\"/>\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">Reset Password</Typography>\n          {loading\n              ? (\n                  <div style={{ marginTop: '64px' }}>\n                    <Placeholder/>\n                  </div>\n              )\n              : (\n                  <form noValidate onSubmit={handleSubmit}>\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"resetCode\"\n                        label=\"Reset code\"\n                        name=\"resetCode\"\n                        type=\"text\"\n                        autoFocus\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"newPassword\"\n                        label=\"New Password\"\n                        name=\"newPassword\"\n                        type=\"password\"\n                    />\n                    <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n                      Change Password\n                    </Button>\n                    <Grid container>\n                      <Grid item>\n                        <br/>\n                        <Link href=\"/login\" variant=\"body1\">{'Remember your password? Login'}</Link>\n                      </Grid>\n                    </Grid>\n                  </form>\n              )}\n        </Box>\n      </Container>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import { List, ListSubheader, Typography } from '@material-ui/core';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { makeRequest } from '../../utils/axios_wrapper';\nimport Message from '../Message';\n\nfunction Search({ queryStr, ...props }) {\n  const [loading, setLoading] = React.useState(true);\n  const [messages, setMessages] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  // Only perform search if there is a query\n  React.useEffect(() => {\n    function performSearch() {\n      makeRequest('GET', 'SEARCH', { token, queryStr })\n          .then(({ data }) => {\n            const { messages } = data;\n            if (typeof messages !== 'undefined' && !Array.isArray(messages)) {\n              return;\n            }\n            setMessages(messages);\n            setLoading(false);\n          })\n          .catch(err => {\n            console.log(err);\n            setLoading(false);\n          });\n    }\n    if (queryStr !== '') {\n      performSearch();\n    }\n  }, [token, queryStr]);\n\n  // If there is no query\n  if (queryStr === '') {\n    return (\n        <>\n          <Typography variant=\"h4\" style={{ marginBottom: 10 }}>Search</Typography>\n          <Typography variant=\"h6\">Enter a query in the search bar above</Typography>\n        </>\n    );\n  }\n\n  // If there is a query\n  return (\n      <>\n        <Typography variant=\"h4\" style={{ marginBottom: 10 }}>Search Results</Typography>\n        {loading\n            ? <LinearProgress/>\n            : messages.length == 0\n                ? <Typography variant=\"h6\">Your search did not return any results</Typography>\n                : (\n                    <List\n                        subheader={<ListSubheader>Messages</ListSubheader>}\n                        style={{ width: '100%' }}\n                    >\n                      {messages.slice().reverse().map(message => (\n                          <Message key={message.messageId} {...message}/>\n                      ))}\n                    </List>\n                )}\n      </>\n  );\n}\n\nexport default Search;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport Search from '../components/Search';\n\nfunction SearchPage({ match }) {\n  const { queryStr = '' } = match.params;\n  return <Layout menu={<ProfileChannelLists/>} body={<Search queryStr={queryStr}/>}/>;\n}\n\nexport default SearchPage;\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport './App.css';\nimport { AuthProvider } from './AuthContext';\nimport './axios';\nimport ProtectedRoute from './components/Layout/ProtectedRoute';\nimport ChannelPage from './pages/ChannelPage';\nimport DmPage from './pages/DmPage';\nimport ForgotPasswordPage from './pages/ForgotPasswordPage';\nimport HomePage from './pages/HomePage';\nimport LoginPage from './pages/LoginPage';\nimport ProfilePage from './pages/ProfilePage';\nimport RegisterPage from './pages/RegisterPage';\nimport ResetPasswordPage from './pages/ResetPasswordPage';\nimport SearchPage from './pages/SearchPage';\n\nfunction App() {\n  document.title = 'UNSW Memes';\n\n  const [authDetails, setAuthDetails] = React.useState(localStorage.getItem('token'));\n\n  function setAuth(token, uId) {\n    localStorage.setItem('token', token);\n    localStorage.setItem('uId', uId);\n    setAuthDetails(token);\n  }\n  return (\n      <AuthProvider value={authDetails}>\n        <Router>\n          <Switch>\n            <Route\n                exact\n                path=\"/login\"\n                render={props => {\n                  return <LoginPage {...props} setAuth={setAuth}/>;\n                }}\n            />\n            <Route\n                exact\n                path=\"/register\"\n                render={props => {\n                  return <RegisterPage {...props} setAuth={setAuth}/>;\n                }}\n            />\n            <Route exact path=\"/forgot_password\" component={ForgotPasswordPage}/>\n            <Route exact path=\"/reset_password\" component={ResetPasswordPage}/>\n            <ProtectedRoute exact path=\"/\" component={HomePage}/>\n            <ProtectedRoute path=\"/profile/:profile\" component={ProfilePage}/>\n            <ProtectedRoute path=\"/channel/:channelId\" component={ChannelPage}/>\n            <ProtectedRoute path=\"/dm/:dmId\" component={DmPage}/>\n            <ProtectedRoute path=\"/search/:queryStr\" component={SearchPage}/>\n            <ProtectedRoute path=\"/search\" component={SearchPage}/>\n          </Switch>\n        </Router>\n      </AuthProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import { red } from '@material-ui/core/colors';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n});\n\nexport default theme;\n","import MomentUtils from '@date-io/moment';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport { ThemeProvider } from '@material-ui/styles';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport App from './App';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport theme from './theme';\n\nReactDOM.render(\n    (\n        <ThemeProvider theme={theme}>\n          <MuiPickersUtilsProvider utils={MomentUtils}>\n            {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n            <CssBaseline/>\n            <App/>\n            <ToastContainer\n                position=\"top-center\"\n                autoClose={5000}\n                hideProgressBar={false}\n                newestOnTop\n                closeOnClick\n                rtl={false}\n                pauseOnVisibilityChange\n                draggable\n                pauseOnHover\n            />\n          </MuiPickersUtilsProvider>\n        </ThemeProvider>\n    ),\n    document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}